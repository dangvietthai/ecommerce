(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[3],{3809:function(e,t,s){Promise.resolve().then(s.bind(s,3712))},7977:function(e,t,s){"use strict";s.d(t,{Z:function(){return c}});var a=s(4090);/**
 * @license lucide-react v0.483.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */let r=e=>e.replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase(),l=function(){for(var e=arguments.length,t=Array(e),s=0;s<e;s++)t[s]=arguments[s];return t.filter((e,t,s)=>!!e&&""!==e.trim()&&s.indexOf(e)===t).join(" ").trim()};/**
 * @license lucide-react v0.483.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */var n={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"};/**
 * @license lucide-react v0.483.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */let i=(0,a.forwardRef)((e,t)=>{let{color:s="currentColor",size:r=24,strokeWidth:i=2,absoluteStrokeWidth:c,className:d="",children:m,iconNode:o,...x}=e;return(0,a.createElement)("svg",{ref:t,...n,width:r,height:r,stroke:s,strokeWidth:c?24*Number(i)/Number(r):i,className:l("lucide",d),...x},[...o.map(e=>{let[t,s]=e;return(0,a.createElement)(t,s)}),...Array.isArray(m)?m:[m]])}),c=(e,t)=>{let s=(0,a.forwardRef)((s,n)=>{let{className:c,...d}=s;return(0,a.createElement)(i,{ref:n,iconNode:t,className:l("lucide-".concat(r(e)),c),...d})});return s.displayName="".concat(e),s}},4697:function(e,t,s){"use strict";s.d(t,{Z:function(){return a}});let a=(0,s(7977).Z)("Package",[["path",{d:"M11 21.73a2 2 0 0 0 2 0l7-4A2 2 0 0 0 21 16V8a2 2 0 0 0-1-1.73l-7-4a2 2 0 0 0-2 0l-7 4A2 2 0 0 0 3 8v8a2 2 0 0 0 1 1.73z",key:"1a0edw"}],["path",{d:"M12 22V12",key:"d0xqtd"}],["polyline",{points:"3.29 7 12 12 20.71 7",key:"ousv84"}],["path",{d:"m7.5 4.27 9 5.15",key:"1c824w"}]])},2800:function(e,t,s){"use strict";s.d(t,{Z:function(){return a}});let a=(0,s(7977).Z)("ShoppingCart",[["circle",{cx:"8",cy:"21",r:"1",key:"jimo8o"}],["circle",{cx:"19",cy:"21",r:"1",key:"13723u"}],["path",{d:"M2.05 2.05h2l2.66 12.42a2 2 0 0 0 2 1.58h9.78a2 2 0 0 0 1.95-1.57l1.65-7.43H5.12",key:"9zh506"}]])},4059:function(e,t,s){"use strict";s.d(t,{Z:function(){return a}});let a=(0,s(7977).Z)("Users",[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}],["path",{d:"M22 21v-2a4 4 0 0 0-3-3.87",key:"kshegd"}],["path",{d:"M16 3.13a4 4 0 0 1 0 7.75",key:"1da9ce"}]])},3712:function(e,t,s){"use strict";s.r(t),s.d(t,{default:function(){return h}});var a=s(3827),r=s(4090),l=s(4958),n=s(4059),i=s(7977);let c=(0,i.Z)("ArrowUpRight",[["path",{d:"M7 7h10v10",key:"1tivn9"}],["path",{d:"M7 17 17 7",key:"1vkiza"}]]);var d=s(4697),m=s(2800);let o=(0,i.Z)("ArrowDownRight",[["path",{d:"m7 7 10 10",key:"1fmybs"}],["path",{d:"M17 7v10H7",key:"6fjiku"}]]),x=(0,i.Z)("TrendingUp",[["polyline",{points:"22 7 13.5 15.5 8.5 10.5 2 17",key:"126l90"}],["polyline",{points:"16 7 22 7 22 13",key:"kwv8wd"}]]);function h(){let[e,t]=(0,r.useState)({totalUsers:0,totalProducts:0,totalOrders:0,totalRevenue:0}),[s,i]=(0,r.useState)([]),[h,u]=(0,r.useState)([]),[g,p]=(0,r.useState)(!0);(0,r.useEffect)(()=>{j()},[]);let j=async()=>{try{let{count:e}=await l.O.from("users").select("*",{count:"exact"}),{count:s}=await l.O.from("products").select("*",{count:"exact"}),{count:a,data:r}=await l.O.from("orders").select("total_amount",{count:"exact"}),n=(null==r?void 0:r.reduce((e,t)=>e+(t.total_amount||0),0))||0,{data:c}=await l.O.from("orders").select("*, users(full_name)").order("created_at",{ascending:!1}).limit(5),{data:d}=await l.O.from("users").select("id, created_at, full_name, email").order("created_at",{ascending:!1}).limit(5);if(t({totalUsers:e||0,totalProducts:s||0,totalOrders:a||0,totalRevenue:n}),c){let e=c.map(e=>{var t;return{id:e.id,created_at:e.created_at,total_amount:e.total_amount,status:e.status,user:{full_name:(null===(t=e.users)||void 0===t?void 0:t.full_name)||"Unknown"}}});i(e)}d&&u(d)}catch(e){console.error("Error fetching dashboard data:",e)}finally{p(!1)}},f=e=>new Intl.NumberFormat("vi-VN",{style:"currency",currency:"VND"}).format(e),N=e=>new Date(e).toLocaleDateString("vi-VN",{year:"numeric",month:"long",day:"numeric",hour:"2-digit",minute:"2-digit"});return g?(0,a.jsx)("div",{className:"flex items-center justify-center min-h-[400px]",children:(0,a.jsx)("div",{className:"animate-spin rounded-full h-12 w-12 border-t-2 border-b-2 border-red-600"})}):(0,a.jsxs)("div",{className:"space-y-8",children:[(0,a.jsx)("h1",{className:"text-2xl font-bold",children:"Tổng quan"}),(0,a.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6",children:[(0,a.jsxs)("div",{className:"bg-white rounded-lg shadow p-6",children:[(0,a.jsxs)("div",{className:"flex items-center justify-between",children:[(0,a.jsxs)("div",{children:[(0,a.jsx)("p",{className:"text-sm text-gray-500",children:"Tổng người d\xf9ng"}),(0,a.jsx)("p",{className:"text-2xl font-semibold mt-2",children:e.totalUsers})]}),(0,a.jsx)("div",{className:"bg-blue-100 p-3 rounded-full",children:(0,a.jsx)(n.Z,{className:"w-6 h-6 text-blue-600"})})]}),(0,a.jsxs)("div",{className:"flex items-center mt-4 text-sm",children:[(0,a.jsx)(c,{className:"w-4 h-4 text-green-500 mr-1"}),(0,a.jsx)("span",{className:"text-green-500",children:"12% tăng"}),(0,a.jsx)("span",{className:"text-gray-400 ml-2",children:"so với th\xe1ng trước"})]})]}),(0,a.jsxs)("div",{className:"bg-white rounded-lg shadow p-6",children:[(0,a.jsxs)("div",{className:"flex items-center justify-between",children:[(0,a.jsxs)("div",{children:[(0,a.jsx)("p",{className:"text-sm text-gray-500",children:"Tổng sản phẩm"}),(0,a.jsx)("p",{className:"text-2xl font-semibold mt-2",children:e.totalProducts})]}),(0,a.jsx)("div",{className:"bg-purple-100 p-3 rounded-full",children:(0,a.jsx)(d.Z,{className:"w-6 h-6 text-purple-600"})})]}),(0,a.jsxs)("div",{className:"flex items-center mt-4 text-sm",children:[(0,a.jsx)(c,{className:"w-4 h-4 text-green-500 mr-1"}),(0,a.jsx)("span",{className:"text-green-500",children:"8% tăng"}),(0,a.jsx)("span",{className:"text-gray-400 ml-2",children:"so với th\xe1ng trước"})]})]}),(0,a.jsxs)("div",{className:"bg-white rounded-lg shadow p-6",children:[(0,a.jsxs)("div",{className:"flex items-center justify-between",children:[(0,a.jsxs)("div",{children:[(0,a.jsx)("p",{className:"text-sm text-gray-500",children:"Tổng đơn h\xe0ng"}),(0,a.jsx)("p",{className:"text-2xl font-semibold mt-2",children:e.totalOrders})]}),(0,a.jsx)("div",{className:"bg-orange-100 p-3 rounded-full",children:(0,a.jsx)(m.Z,{className:"w-6 h-6 text-orange-600"})})]}),(0,a.jsxs)("div",{className:"flex items-center mt-4 text-sm",children:[(0,a.jsx)(o,{className:"w-4 h-4 text-red-500 mr-1"}),(0,a.jsx)("span",{className:"text-red-500",children:"3% giảm"}),(0,a.jsx)("span",{className:"text-gray-400 ml-2",children:"so với th\xe1ng trước"})]})]}),(0,a.jsxs)("div",{className:"bg-white rounded-lg shadow p-6",children:[(0,a.jsxs)("div",{className:"flex items-center justify-between",children:[(0,a.jsxs)("div",{children:[(0,a.jsx)("p",{className:"text-sm text-gray-500",children:"Tổng doanh thu"}),(0,a.jsx)("p",{className:"text-2xl font-semibold mt-2",children:f(e.totalRevenue)})]}),(0,a.jsx)("div",{className:"bg-green-100 p-3 rounded-full",children:(0,a.jsx)(x,{className:"w-6 h-6 text-green-600"})})]}),(0,a.jsxs)("div",{className:"flex items-center mt-4 text-sm",children:[(0,a.jsx)(c,{className:"w-4 h-4 text-green-500 mr-1"}),(0,a.jsx)("span",{className:"text-green-500",children:"15% tăng"}),(0,a.jsx)("span",{className:"text-gray-400 ml-2",children:"so với th\xe1ng trước"})]})]})]}),(0,a.jsxs)("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6",children:[(0,a.jsxs)("div",{className:"bg-white rounded-lg shadow",children:[(0,a.jsx)("div",{className:"p-6 border-b",children:(0,a.jsx)("h2",{className:"text-lg font-semibold",children:"Đơn h\xe0ng gần đ\xe2y"})}),(0,a.jsx)("div",{className:"p-6",children:(0,a.jsx)("div",{className:"space-y-6",children:s.map(e=>{var t;return(0,a.jsxs)("div",{className:"flex items-center justify-between",children:[(0,a.jsxs)("div",{children:[(0,a.jsx)("p",{className:"font-medium",children:null===(t=e.user)||void 0===t?void 0:t.full_name}),(0,a.jsx)("p",{className:"text-sm text-gray-500",children:N(e.created_at)})]}),(0,a.jsxs)("div",{className:"text-right",children:[(0,a.jsx)("p",{className:"font-medium",children:f(e.total_amount)}),(0,a.jsx)("p",{className:"text-sm ".concat("completed"===e.status?"text-green-500":"pending"===e.status?"text-orange-500":"text-red-500"),children:"completed"===e.status?"Ho\xe0n th\xe0nh":"pending"===e.status?"Đang xử l\xfd":"Đ\xe3 hủy"})]})]},e.id)})})})]}),(0,a.jsxs)("div",{className:"bg-white rounded-lg shadow",children:[(0,a.jsx)("div",{className:"p-6 border-b",children:(0,a.jsx)("h2",{className:"text-lg font-semibold",children:"Người d\xf9ng mới"})}),(0,a.jsx)("div",{className:"p-6",children:(0,a.jsx)("div",{className:"space-y-6",children:h.map(e=>(0,a.jsxs)("div",{className:"flex items-center justify-between",children:[(0,a.jsxs)("div",{children:[(0,a.jsx)("p",{className:"font-medium",children:e.full_name}),(0,a.jsx)("p",{className:"text-sm text-gray-500",children:e.email})]}),(0,a.jsx)("p",{className:"text-sm text-gray-500",children:N(e.created_at)})]},e.id))})})]})]})]})}},4958:function(e,t,s){"use strict";s.d(t,{O:function(){return a}});let a=(0,s(8714).createClientComponentClient)()}},function(e){e.O(0,[8714,2971,8069,1744],function(){return e(e.s=3809)}),_N_E=e.O()}]);