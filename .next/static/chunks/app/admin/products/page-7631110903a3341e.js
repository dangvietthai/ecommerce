(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[4122],{7478:function(e,t,r){Promise.resolve().then(r.bind(r,5924))},7977:function(e,t,r){"use strict";r.d(t,{Z:function(){return n}});var a=r(4090);/**
 * @license lucide-react v0.483.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */let s=e=>e.replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase(),i=function(){for(var e=arguments.length,t=Array(e),r=0;r<e;r++)t[r]=arguments[r];return t.filter((e,t,r)=>!!e&&""!==e.trim()&&r.indexOf(e)===t).join(" ").trim()};/**
 * @license lucide-react v0.483.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */var l={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"};/**
 * @license lucide-react v0.483.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */let c=(0,a.forwardRef)((e,t)=>{let{color:r="currentColor",size:s=24,strokeWidth:c=2,absoluteStrokeWidth:n,className:d="",children:o,iconNode:m,...u}=e;return(0,a.createElement)("svg",{ref:t,...l,width:s,height:s,stroke:r,strokeWidth:n?24*Number(c)/Number(s):c,className:i("lucide",d),...u},[...m.map(e=>{let[t,r]=e;return(0,a.createElement)(t,r)}),...Array.isArray(o)?o:[o]])}),n=(e,t)=>{let r=(0,a.forwardRef)((r,l)=>{let{className:n,...d}=r;return(0,a.createElement)(c,{ref:l,iconNode:t,className:i("lucide-".concat(s(e)),n),...d})});return r.displayName="".concat(e),r}},7731:function(e,t,r){"use strict";r.d(t,{Z:function(){return a}});let a=(0,r(7977).Z)("Pencil",[["path",{d:"M21.174 6.812a1 1 0 0 0-3.986-3.987L3.842 16.174a2 2 0 0 0-.5.83l-1.321 4.352a.5.5 0 0 0 .623.622l4.353-1.32a2 2 0 0 0 .83-.497z",key:"1a8usu"}],["path",{d:"m15 5 4 4",key:"1mk7zo"}]])},94:function(e,t,r){"use strict";r.d(t,{Z:function(){return a}});let a=(0,r(7977).Z)("Plus",[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"M12 5v14",key:"s699le"}]])},8670:function(e,t,r){"use strict";r.d(t,{Z:function(){return a}});let a=(0,r(7977).Z)("Search",[["circle",{cx:"11",cy:"11",r:"8",key:"4ej97u"}],["path",{d:"m21 21-4.3-4.3",key:"1qie3q"}]])},489:function(e,t,r){"use strict";r.d(t,{Z:function(){return a}});let a=(0,r(7977).Z)("Trash2",[["path",{d:"M3 6h18",key:"d0wm0j"}],["path",{d:"M19 6v14c0 1-1 2-2 2H7c-1 0-2-1-2-2V6",key:"4alrt4"}],["path",{d:"M8 6V4c0-1 1-2 2-2h4c1 0 2 1 2 2v2",key:"v07s0e"}],["line",{x1:"10",x2:"10",y1:"11",y2:"17",key:"1uufr5"}],["line",{x1:"14",x2:"14",y1:"11",y2:"17",key:"xtxkd"}]])},6993:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),Object.defineProperty(t,"RouterContext",{enumerable:!0,get:function(){return a}});let a=r(6921)._(r(4090)).default.createContext(null)},5924:function(e,t,r){"use strict";r.r(t),r.d(t,{default:function(){return m}});var a=r(3827),s=r(4090),i=r(4958),l=r(94),c=r(8670),n=r(7731),d=r(489),o=r(703);function m(){var e;let[t,r]=(0,s.useState)([]),[m,u]=(0,s.useState)([]),[h,p]=(0,s.useState)(!0),[x,g]=(0,s.useState)(""),[f,y]=(0,s.useState)(!1),[b,j]=(0,s.useState)(!1),[v,w]=(0,s.useState)(null),[N,_]=(0,s.useState)({name:"",description:"",price:0,category_id:"",stock_quantity:0,image_url:"",is_active:!0,is_new:!0,is_featured:!1,is_bestseller:!1,slug:""}),[k,C]=(0,s.useState)(null),[O,L]=(0,s.useState)([]),[S,q]=(0,s.useState)(""),[M,E]=(0,s.useState)([]);(0,s.useEffect)(()=>{Z(),T()},[]);let Z=async()=>{try{let{data:e,error:t}=await i.O.from("products").select("\n          *,\n          categories (\n            name\n          ),\n          product_images (\n            image_url,\n            is_primary\n          )\n        ").order("created_at",{ascending:!1});if(t)throw t;let a=e.map(e=>{var t,r,a;return{...e,category:(null===(t=e.categories)||void 0===t?void 0:t.name)||"Uncategorized",image_url:(null===(a=e.product_images)||void 0===a?void 0:null===(r=a.find(e=>e.is_primary))||void 0===r?void 0:r.image_url)||e.image_url}});r(a)}catch(e){console.error("Error fetching products:",e)}finally{p(!1)}},T=async()=>{try{let{data:e,error:t}=await i.O.from("categories").select("*").order("name",{ascending:!0});if(t)throw t;u(e||[])}catch(e){console.error("Error fetching categories:",e)}},A=async()=>{try{if(console.log("Adding product:",N),!N.name||!N.category_id||!N.price||!k){alert("Vui l\xf2ng điền đầy đủ th\xf4ng tin bắt buộc");return}let e=N.name.toLowerCase().replace(/[^a-z0-9]+/g,"-").replace(/(^-|-$)/g,""),t="";if(k){let e="products/".concat(Date.now(),"-").concat(k.name),{data:r,error:a}=await i.O.storage.from("products").upload(e,k);if(a)throw a;let{data:{publicUrl:s}}=i.O.storage.from("products").getPublicUrl(e);t=s}let{data:r,error:a}=await i.O.from("products").insert([{name:N.name,slug:e,description:N.description,price:N.price,category_id:N.category_id,stock_quantity:N.stock_quantity,image_url:t,is_active:N.is_active,is_new:N.is_new,is_featured:N.is_featured,is_bestseller:N.is_bestseller}]).select().single();if(a)throw console.error("Supabase error:",a),a;if(t){let{error:e}=await i.O.from("product_images").insert([{product_id:r.id,image_url:t,is_primary:!0,display_order:0}]);if(e)throw e}for(let e=0;e<O.length;e++){let t=O[e],a="products/".concat(Date.now(),"-").concat(t.name),{error:s}=await i.O.storage.from("products").upload(a,t);if(s)throw s;let{data:{publicUrl:l}}=i.O.storage.from("products").getPublicUrl(a),{error:c}=await i.O.from("product_images").insert([{product_id:r.id,image_url:l,is_primary:!1,display_order:e+1}]);if(c)throw c}console.log("Product added successfully:",r),y(!1),_({name:"",description:"",price:0,category_id:"",stock_quantity:0,image_url:"",is_active:!0,is_new:!0,is_featured:!1,is_bestseller:!1,slug:""}),C(null),L([]),q(""),E([]),Z()}catch(e){console.error("Error adding product:",e),alert("C\xf3 lỗi xảy ra khi th\xeam sản phẩm. Vui l\xf2ng thử lại.")}},D=async e=>{if(confirm("Bạn c\xf3 chắc chắn muốn x\xf3a sản phẩm n\xe0y?"))try{let{error:t}=await i.O.from("products").delete().eq("id",e);if(t)throw t;Z()}catch(e){console.error("Error deleting product:",e)}},P=e=>{var t;let r=null===(t=e.target.files)||void 0===t?void 0:t[0];if(r){C(r);let e=new FileReader;e.onloadend=()=>{q(e.result),_(t=>({...t,image_url:e.result}))},e.readAsDataURL(r)}},R=e=>{let t=Array.from(e.target.files||[]);L(e=>[...e,...t]),t.forEach(e=>{let t=new FileReader;t.onloadend=()=>{E(e=>[...e,t.result])},t.readAsDataURL(e)})},U=e=>{L(t=>t.filter((t,r)=>r!==e)),E(t=>t.filter((t,r)=>r!==e)),_(t=>({...t,image_url:t.image_url.split(",").filter((t,r)=>r!==e).join(",")}))},V=async e=>{try{let{data:t,error:r}=await i.O.from("product_images").select("*").eq("product_id",e.id).eq("is_primary",!1).order("display_order");if(r)throw r;w({...e,product_images:t||[]}),j(!0),q(""),C(null),L([]),E([])}catch(e){console.error("Error fetching product images:",e)}},z=async()=>{if(v)try{if(!v.name||!v.category_id||!v.price){alert("Vui l\xf2ng điền đầy đủ th\xf4ng tin bắt buộc");return}let e=v.name.toLowerCase().replace(/[^a-z0-9]+/g,"-").replace(/(^-|-$)/g,""),t=v.image_url;if(k){let e="products/".concat(Date.now(),"-").concat(k.name),{data:r,error:a}=await i.O.storage.from("products").upload(e,k);if(a)throw a;let{data:{publicUrl:s}}=i.O.storage.from("products").getPublicUrl(e);t=s;let{error:l}=await i.O.from("product_images").delete().eq("product_id",v.id).eq("is_primary",!0);if(l)throw l;let{error:c}=await i.O.from("product_images").insert({product_id:v.id,image_url:t,is_primary:!0,display_order:0});if(c)throw c}let{error:r}=await i.O.from("products").update({name:v.name,slug:e,description:v.description,price:v.price,category_id:v.category_id,stock_quantity:v.stock_quantity,image_url:t,is_active:v.is_active,is_new:v.is_new,is_featured:v.is_featured,is_bestseller:v.is_bestseller,updated_at:new Date().toISOString()}).eq("id",v.id);if(r)throw r;for(let e=0;e<O.length;e++){let t=O[e],r="products/".concat(Date.now(),"-").concat(t.name),{error:a}=await i.O.storage.from("products").upload(r,t);if(a)throw a;let{data:{publicUrl:s}}=i.O.storage.from("products").getPublicUrl(r),{error:l}=await i.O.from("product_images").insert([{product_id:v.id,image_url:s,is_primary:!1,display_order:e+1}]);if(l)throw l}await Z(),j(!1),w(null),C(null),q(""),L([]),E([])}catch(e){console.error("Error updating product:",e),alert("C\xf3 lỗi xảy ra khi cập nhật sản phẩm")}},B=t.filter(e=>e.name.toLowerCase().includes(x.toLowerCase())||(e.category||"").toLowerCase().includes(x.toLowerCase())),W=e=>new Intl.NumberFormat("vi-VN",{style:"currency",currency:"VND"}).format(e);return h?(0,a.jsx)("div",{className:"flex items-center justify-center min-h-[400px]",children:(0,a.jsx)("div",{className:"animate-spin rounded-full h-12 w-12 border-t-2 border-b-2 border-red-600"})}):(0,a.jsxs)("div",{className:"space-y-6",children:[(0,a.jsxs)("div",{className:"flex justify-between items-center",children:[(0,a.jsx)("h1",{className:"text-2xl font-bold",children:"Quản l\xfd sản phẩm"}),(0,a.jsxs)("button",{onClick:()=>y(!0),className:"bg-red-600 text-white px-4 py-2 rounded-lg flex items-center space-x-2 hover:bg-red-700 transition-colors",children:[(0,a.jsx)(l.Z,{className:"w-5 h-5"}),(0,a.jsx)("span",{children:"Th\xeam sản phẩm"})]})]}),(0,a.jsxs)("div",{className:"relative",children:[(0,a.jsx)("input",{type:"text",placeholder:"T\xecm kiếm sản phẩm...",value:x,onChange:e=>g(e.target.value),className:"w-full pl-10 pr-4 py-2 border rounded-lg"}),(0,a.jsx)(c.Z,{className:"w-5 h-5 text-gray-400 absolute left-3 top-2.5"})]}),(0,a.jsx)("div",{className:"bg-white rounded-lg shadow overflow-hidden",children:(0,a.jsxs)("table",{className:"min-w-full divide-y divide-gray-200",children:[(0,a.jsx)("thead",{className:"bg-gray-50",children:(0,a.jsxs)("tr",{children:[(0,a.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Sản phẩm"}),(0,a.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Danh mục"}),(0,a.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Gi\xe1"}),(0,a.jsx)("th",{className:"px-6 py-3 text-right text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Thao t\xe1c"})]})}),(0,a.jsx)("tbody",{className:"bg-white divide-y divide-gray-200",children:B.map(e=>(0,a.jsxs)("tr",{className:"hover:bg-gray-50",children:[(0,a.jsx)("td",{className:"px-6 py-4 whitespace-nowrap",children:(0,a.jsxs)("div",{className:"flex items-center space-x-3",children:[(0,a.jsx)("div",{className:"flex-shrink-0 h-10 w-10 relative",children:(0,a.jsx)(o.default,{src:e.image_url||"/placeholder.png",alt:e.name,fill:!0,className:"rounded-lg object-cover"})}),(0,a.jsxs)("div",{children:[(0,a.jsx)("div",{className:"font-medium text-gray-900",children:e.name}),(0,a.jsx)("div",{className:"text-sm text-gray-500 truncate max-w-xs",children:e.description})]})]})}),(0,a.jsx)("td",{className:"px-6 py-4 whitespace-nowrap",children:(0,a.jsx)("span",{className:"px-2 inline-flex text-xs leading-5 font-semibold rounded-full bg-green-100 text-green-800",children:e.category||"Chưa ph\xe2n loại"})}),(0,a.jsx)("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-500",children:W(e.price)}),(0,a.jsxs)("td",{className:"px-6 py-4 whitespace-nowrap text-right text-sm font-medium",children:[(0,a.jsx)("button",{onClick:()=>V(e),className:"text-indigo-600 hover:text-indigo-900 mr-4",children:(0,a.jsx)(n.Z,{className:"w-5 h-5"})}),(0,a.jsx)("button",{onClick:()=>D(e.id),className:"text-red-600 hover:text-red-900",children:(0,a.jsx)(d.Z,{className:"w-5 h-5"})})]})]},e.id))})]})}),f&&(0,a.jsx)("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center p-4",style:{marginTop:0},children:(0,a.jsxs)("div",{className:"bg-white rounded-lg p-6 max-w-4xl w-full",children:[(0,a.jsx)("h2",{className:"text-xl font-bold py-4 border-b",children:"Th\xeam sản phẩm mới"}),(0,a.jsxs)("div",{className:"grid grid-cols-2 gap-6 mt-4",children:[(0,a.jsxs)("div",{className:"space-y-4",children:[(0,a.jsxs)("div",{children:[(0,a.jsx)("label",{className:"block text-sm font-medium text-gray-700",children:"T\xean sản phẩm"}),(0,a.jsx)("input",{type:"text",value:N.name,onChange:e=>_({...N,name:e.target.value}),className:"mt-1 block w-full border rounded-md px-3 py-2"})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)("label",{className:"block text-sm font-medium text-gray-700",children:"M\xf4 tả"}),(0,a.jsx)("textarea",{value:N.description,onChange:e=>_({...N,description:e.target.value}),className:"mt-1 block w-full border rounded-md px-3 py-2",rows:3})]}),(0,a.jsxs)("div",{className:"grid grid-cols-2 gap-4",children:[(0,a.jsxs)("div",{children:[(0,a.jsx)("label",{className:"block text-sm font-medium text-gray-700",children:"Gi\xe1"}),(0,a.jsx)("input",{type:"number",value:N.price,onChange:e=>_({...N,price:Number(e.target.value)}),className:"mt-1 block w-full border rounded-md px-3 py-2"})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)("label",{className:"block text-sm font-medium text-gray-700",children:"Số lượng"}),(0,a.jsx)("input",{type:"number",value:N.stock_quantity,onChange:e=>_({...N,stock_quantity:Number(e.target.value)}),className:"mt-1 block w-full border rounded-md px-3 py-2"})]})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)("label",{className:"block text-sm font-medium text-gray-700",children:"Danh mục"}),(0,a.jsxs)("select",{value:N.category_id,onChange:e=>_({...N,category_id:e.target.value}),className:"mt-1 block w-full border rounded-md px-3 py-2",children:[(0,a.jsx)("option",{value:"",children:"Chọn danh mục"}),m.map(e=>(0,a.jsx)("option",{value:e.id,children:e.name},e.id))]})]})]}),(0,a.jsxs)("div",{className:"space-y-4",children:[(0,a.jsxs)("div",{children:[(0,a.jsx)("label",{className:"block text-sm font-medium text-gray-700",children:"Ảnh ch\xednh"}),(0,a.jsxs)("div",{className:"mt-1 flex items-center space-x-4",children:[(0,a.jsx)("div",{className:"relative w-32 h-32 border rounded-md overflow-hidden",children:S?(0,a.jsx)("img",{src:S,alt:"Main product",className:"w-full h-full object-cover"}):(0,a.jsx)("div",{className:"w-full h-full flex items-center justify-center bg-gray-50",children:(0,a.jsx)("span",{className:"text-gray-400",children:"Chưa c\xf3 ảnh"})})}),(0,a.jsx)("div",{children:(0,a.jsxs)("label",{className:"cursor-pointer bg-white border border-gray-300 rounded-md px-4 py-2 text-sm font-medium text-gray-700 hover:bg-gray-50",children:["Chọn ảnh",(0,a.jsx)("input",{type:"file",accept:"image/*",onChange:P,className:"hidden"})]})})]})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)("label",{className:"block text-sm font-medium text-gray-700",children:"Ảnh phụ"}),(0,a.jsxs)("div",{className:"mt-1",children:[(0,a.jsx)("div",{className:"grid grid-cols-3 gap-4",children:M.map((e,t)=>(0,a.jsxs)("div",{className:"relative group",children:[(0,a.jsx)("img",{src:e,alt:"Additional ".concat(t+1),className:"w-full h-32 object-cover rounded-md"}),(0,a.jsx)("button",{onClick:()=>U(t),className:"absolute top-2 right-2 bg-red-500 text-white rounded-full p-1 opacity-0 group-hover:opacity-100 transition-opacity",children:(0,a.jsx)("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,a.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"})})})]},t))}),(0,a.jsx)("div",{className:"mt-4",children:(0,a.jsxs)("label",{className:"cursor-pointer bg-white border border-gray-300 rounded-md px-4 py-2 text-sm font-medium text-gray-700 hover:bg-gray-50",children:["Th\xeam ảnh phụ",(0,a.jsx)("input",{type:"file",accept:"image/*",multiple:!0,onChange:R,className:"hidden"})]})})]})]}),(0,a.jsx)("div",{className:"flex items-center",children:(0,a.jsxs)("label",{className:"flex items-center cursor-pointer",children:[(0,a.jsx)("input",{type:"checkbox",checked:N.is_active,onChange:e=>_({...N,is_active:e.target.checked}),className:"h-4 w-4 text-red-600 focus:ring-red-500 border-gray-300 rounded"}),(0,a.jsx)("span",{className:"ml-2 block text-sm text-gray-900",children:"K\xedch hoạt ngay"})]})})]})]}),(0,a.jsxs)("div",{className:"mt-6 pt-4 border-t flex justify-end space-x-3",children:[(0,a.jsx)("button",{onClick:()=>y(!1),className:"px-4 py-2 border rounded-md hover:bg-gray-50",children:"Hủy"}),(0,a.jsx)("button",{onClick:A,className:"px-4 py-2 bg-red-600 text-white rounded-md hover:bg-red-700",children:"Th\xeam"})]})]})}),b&&v&&(0,a.jsx)("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center p-4",style:{marginTop:0},children:(0,a.jsxs)("div",{className:"bg-white rounded-lg p-6 max-w-4xl w-full",children:[(0,a.jsx)("h2",{className:"text-xl font-bold py-4 border-b",children:"Sửa sản phẩm"}),(0,a.jsxs)("div",{className:"grid grid-cols-2 gap-6 mt-4",children:[(0,a.jsxs)("div",{className:"space-y-4",children:[(0,a.jsxs)("div",{children:[(0,a.jsx)("label",{className:"block text-sm font-medium text-gray-700",children:"T\xean sản phẩm"}),(0,a.jsx)("input",{type:"text",value:v.name,onChange:e=>w({...v,name:e.target.value}),className:"mt-1 block w-full border rounded-md px-3 py-2"})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)("label",{className:"block text-sm font-medium text-gray-700",children:"M\xf4 tả"}),(0,a.jsx)("textarea",{value:v.description,onChange:e=>w({...v,description:e.target.value}),className:"mt-1 block w-full border rounded-md px-3 py-2",rows:3})]}),(0,a.jsxs)("div",{className:"grid grid-cols-2 gap-4",children:[(0,a.jsxs)("div",{children:[(0,a.jsx)("label",{className:"block text-sm font-medium text-gray-700",children:"Gi\xe1"}),(0,a.jsx)("input",{type:"number",value:v.price,onChange:e=>w({...v,price:Number(e.target.value)}),className:"mt-1 block w-full border rounded-md px-3 py-2"})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)("label",{className:"block text-sm font-medium text-gray-700",children:"Số lượng"}),(0,a.jsx)("input",{type:"number",value:v.stock_quantity,onChange:e=>w({...v,stock_quantity:Number(e.target.value)}),className:"mt-1 block w-full border rounded-md px-3 py-2"})]})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)("label",{className:"block text-sm font-medium text-gray-700",children:"Danh mục"}),(0,a.jsxs)("select",{value:v.category_id,onChange:e=>w({...v,category_id:e.target.value}),className:"mt-1 block w-full border rounded-md px-3 py-2",children:[(0,a.jsx)("option",{value:"",children:"Chọn danh mục"}),m.map(e=>(0,a.jsx)("option",{value:e.id,children:e.name},e.id))]})]})]}),(0,a.jsxs)("div",{className:"space-y-4",children:[(0,a.jsxs)("div",{children:[(0,a.jsx)("label",{className:"block text-sm font-medium text-gray-700",children:"Ảnh ch\xednh"}),(0,a.jsxs)("div",{className:"mt-1 flex items-center space-x-4",children:[(0,a.jsx)("div",{className:"relative w-32 h-32 border rounded-md overflow-hidden",children:S||v.image_url?(0,a.jsx)("img",{src:S||v.image_url,alt:"Main product",className:"w-full h-full object-cover"}):(0,a.jsx)("div",{className:"w-full h-full flex items-center justify-center bg-gray-50",children:(0,a.jsx)("span",{className:"text-gray-400",children:"Chưa c\xf3 ảnh"})})}),(0,a.jsx)("div",{children:(0,a.jsxs)("label",{className:"cursor-pointer bg-white border border-gray-300 rounded-md px-4 py-2 text-sm font-medium text-gray-700 hover:bg-gray-50",children:["Chọn ảnh",(0,a.jsx)("input",{type:"file",accept:"image/*",onChange:P,className:"hidden"})]})})]})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)("label",{className:"block text-sm font-medium text-gray-700",children:"Ảnh phụ"}),(0,a.jsxs)("div",{className:"mt-1",children:[(0,a.jsxs)("div",{className:"grid grid-cols-3 gap-4",children:[null===(e=v.product_images)||void 0===e?void 0:e.map((e,t)=>(0,a.jsxs)("div",{className:"relative group",children:[(0,a.jsx)("img",{src:e.image_url,alt:"Additional ".concat(t+1),className:"w-full h-32 object-cover rounded-md"}),(0,a.jsx)("button",{onClick:async()=>{try{var t;let{error:r}=await i.O.from("product_images").delete().eq("id",e.id);if(r)throw r;w({...v,product_images:null===(t=v.product_images)||void 0===t?void 0:t.filter(t=>t.id!==e.id)})}catch(e){console.error("Error deleting image:",e)}},className:"absolute top-2 right-2 bg-red-500 text-white rounded-full p-1 opacity-0 group-hover:opacity-100 transition-opacity",children:(0,a.jsx)("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,a.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"})})})]},e.id)),M.map((e,t)=>(0,a.jsxs)("div",{className:"relative group",children:[(0,a.jsx)("img",{src:e,alt:"New Additional ".concat(t+1),className:"w-full h-32 object-cover rounded-md"}),(0,a.jsx)("button",{onClick:()=>{L(e=>e.filter((e,r)=>r!==t)),E(e=>e.filter((e,r)=>r!==t))},className:"absolute top-2 right-2 bg-red-500 text-white rounded-full p-1 opacity-0 group-hover:opacity-100 transition-opacity",children:(0,a.jsx)("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,a.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"})})})]},"new-".concat(t)))]}),(0,a.jsx)("div",{className:"mt-4",children:(0,a.jsxs)("label",{className:"cursor-pointer bg-white border border-gray-300 rounded-md px-4 py-2 text-sm font-medium text-gray-700 hover:bg-gray-50",children:["Th\xeam ảnh phụ",(0,a.jsx)("input",{type:"file",accept:"image/*",multiple:!0,onChange:R,className:"hidden"})]})})]})]}),(0,a.jsx)("div",{className:"flex items-center",children:(0,a.jsxs)("label",{className:"flex items-center cursor-pointer",children:[(0,a.jsx)("input",{type:"checkbox",checked:v.is_active,onChange:e=>w({...v,is_active:e.target.checked}),className:"h-4 w-4 text-red-600 focus:ring-red-500 border-gray-300 rounded"}),(0,a.jsx)("span",{className:"ml-2 block text-sm text-gray-900",children:"K\xedch hoạt"})]})})]})]}),(0,a.jsxs)("div",{className:"mt-6 pt-4 border-t flex justify-end space-x-3",children:[(0,a.jsx)("button",{onClick:()=>{j(!1),w(null)},className:"px-4 py-2 border rounded-md hover:bg-gray-50",children:"Hủy"}),(0,a.jsx)("button",{onClick:z,className:"px-4 py-2 bg-red-600 text-white rounded-md hover:bg-red-700",children:"Cập nhật"})]})]})})]})}},4958:function(e,t,r){"use strict";r.d(t,{O:function(){return a}});let a=(0,r(8714).createClientComponentClient)()}},function(e){e.O(0,[8714,703,2971,8069,1744],function(){return e(e.s=7478)}),_N_E=e.O()}]);