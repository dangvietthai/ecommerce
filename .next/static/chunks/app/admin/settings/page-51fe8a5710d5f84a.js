(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[6140],{7941:function(e,t,s){Promise.resolve().then(s.bind(s,6558))},7977:function(e,t,s){"use strict";s.d(t,{Z:function(){return o}});var a=s(4090);/**
 * @license lucide-react v0.483.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */let n=e=>e.replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase(),r=function(){for(var e=arguments.length,t=Array(e),s=0;s<e;s++)t[s]=arguments[s];return t.filter((e,t,s)=>!!e&&""!==e.trim()&&s.indexOf(e)===t).join(" ").trim()};/**
 * @license lucide-react v0.483.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */var l={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"};/**
 * @license lucide-react v0.483.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */let i=(0,a.forwardRef)((e,t)=>{let{color:s="currentColor",size:n=24,strokeWidth:i=2,absoluteStrokeWidth:o,className:c="",children:d,iconNode:m,...h}=e;return(0,a.createElement)("svg",{ref:t,...l,width:n,height:n,stroke:s,strokeWidth:o?24*Number(i)/Number(n):i,className:r("lucide",c),...h},[...m.map(e=>{let[t,s]=e;return(0,a.createElement)(t,s)}),...Array.isArray(d)?d:[d]])}),o=(e,t)=>{let s=(0,a.forwardRef)((s,l)=>{let{className:o,...c}=s;return(0,a.createElement)(i,{ref:l,iconNode:t,className:r("lucide-".concat(n(e)),o),...c})});return s.displayName="".concat(e),s}},6558:function(e,t,s){"use strict";s.r(t),s.d(t,{default:function(){return o}});var a=s(3827),n=s(4090),r=s(4958);let l=(0,s(7977).Z)("Save",[["path",{d:"M15.2 3a2 2 0 0 1 1.4.6l3.8 3.8a2 2 0 0 1 .6 1.4V19a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2z",key:"1c8476"}],["path",{d:"M17 21v-7a1 1 0 0 0-1-1H8a1 1 0 0 0-1 1v7",key:"1ydtos"}],["path",{d:"M7 3v4a1 1 0 0 0 1 1h7",key:"t51u73"}]]),i={id:"default_settings",store_name:"",store_description:"",contact_email:"",contact_phone:"",address:"",currency:"VND",tax_rate:10,shipping_fee:0,free_shipping_threshold:0,business_hours:{monday:{open:"09:00",close:"18:00"},tuesday:{open:"09:00",close:"18:00"},wednesday:{open:"09:00",close:"18:00"},thursday:{open:"09:00",close:"18:00"},friday:{open:"09:00",close:"18:00"},saturday:{open:"09:00",close:"18:00"},sunday:{open:"09:00",close:"18:00"}},social_media:{facebook:"",instagram:"",twitter:""},notification_settings:{order_confirmation:!0,shipping_updates:!0,promotional_emails:!0}};function o(){var e,t,s,o,c,d;let[m,h]=(0,n.useState)(i),[u,x]=(0,n.useState)(!0),[p,g]=(0,n.useState)(!1),[b,f]=(0,n.useState)("");(0,n.useEffect)(()=>{y()},[]);let y=async()=>{try{let{data:e,error:t}=await r.O.from("store_settings").select("*").eq("id","default_settings").single();t?(console.error("Error fetching settings:",t),h(i)):e&&h(e)}catch(e){console.error("Error fetching settings:",e),h(i)}finally{x(!1)}},v=async()=>{g(!0),f("");try{let e={...m,store_name:m.store_name||"",store_description:m.store_description||"",contact_email:m.contact_email||"",contact_phone:m.contact_phone||"",address:m.address||"",currency:m.currency||"VND",tax_rate:m.tax_rate||10,shipping_fee:m.shipping_fee||0,free_shipping_threshold:m.free_shipping_threshold||0,business_hours:m.business_hours||i.business_hours,social_media:m.social_media||i.social_media,notification_settings:m.notification_settings||i.notification_settings};console.log("Saving settings:",e);let{data:t,error:s}=await r.O.from("store_settings").upsert(e,{onConflict:"id"}).select();if(s)throw console.error("Error saving settings:",s),s;console.log("Settings saved successfully:",t),f("Đ\xe3 lưu c\xe0i đặt th\xe0nh c\xf4ng!"),setTimeout(()=>f(""),3e3)}catch(e){console.error("Error saving settings:",e),f("Lỗi khi lưu c\xe0i đặt. Vui l\xf2ng thử lại.")}finally{g(!1)}},_=e=>new Intl.NumberFormat("vi-VN",{style:"currency",currency:"VND"}).format(e),j=(e,t)=>{h(s=>({...s,[e]:t}))},N=(e,t,s)=>{h(a=>({...a,business_hours:{...a.business_hours,[e]:{...a.business_hours[e],[t]:s}}}))},k=(e,t)=>{h(s=>({...s,social_media:{...s.social_media,[e]:t}}))},w=(e,t)=>{h(s=>({...s,notification_settings:{...s.notification_settings,[e]:t}}))};return u?(0,a.jsx)("div",{className:"flex items-center justify-center min-h-[400px]",children:(0,a.jsx)("div",{className:"animate-spin rounded-full h-12 w-12 border-t-2 border-b-2 border-red-600"})}):(0,a.jsxs)("div",{className:"space-y-6",children:[(0,a.jsxs)("div",{className:"flex justify-between items-center",children:[(0,a.jsx)("h1",{className:"text-2xl font-bold",children:"C\xe0i đặt cửa h\xe0ng"}),(0,a.jsxs)("button",{onClick:v,disabled:p,className:"bg-red-600 text-white px-4 py-2 rounded-lg flex items-center space-x-2 hover:bg-red-700 transition-colors disabled:opacity-50",children:[(0,a.jsx)(l,{className:"w-5 h-5"}),(0,a.jsx)("span",{children:p?"Đang lưu...":"Lưu c\xe0i đặt"})]})]}),b&&(0,a.jsx)("div",{className:"p-4 rounded-lg ".concat(b.includes("th\xe0nh c\xf4ng")?"bg-green-100 text-green-800":"bg-red-100 text-red-800"),children:b}),(0,a.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[(0,a.jsxs)("div",{className:"bg-white rounded-lg shadow p-6 space-y-4",children:[(0,a.jsx)("h2",{className:"text-lg font-semibold",children:"Th\xf4ng tin cơ bản"}),(0,a.jsxs)("div",{children:[(0,a.jsx)("label",{className:"block text-sm font-medium text-gray-700",children:"T\xean cửa h\xe0ng"}),(0,a.jsx)("input",{type:"text",value:m.store_name||"",onChange:e=>j("store_name",e.target.value),className:"mt-1 block w-full border rounded-md px-3 py-2"})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)("label",{className:"block text-sm font-medium text-gray-700",children:"M\xf4 tả"}),(0,a.jsx)("textarea",{value:m.store_description||"",onChange:e=>j("store_description",e.target.value),rows:3,className:"mt-1 block w-full border rounded-md px-3 py-2"})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)("label",{className:"block text-sm font-medium text-gray-700",children:"Email li\xean hệ"}),(0,a.jsx)("input",{type:"email",value:m.contact_email||"",onChange:e=>j("contact_email",e.target.value),className:"mt-1 block w-full border rounded-md px-3 py-2"})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)("label",{className:"block text-sm font-medium text-gray-700",children:"Số điện thoại"}),(0,a.jsx)("input",{type:"tel",value:m.contact_phone||"",onChange:e=>j("contact_phone",e.target.value),className:"mt-1 block w-full border rounded-md px-3 py-2"})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)("label",{className:"block text-sm font-medium text-gray-700",children:"Địa chỉ"}),(0,a.jsx)("textarea",{value:m.address||"",onChange:e=>j("address",e.target.value),rows:2,className:"mt-1 block w-full border rounded-md px-3 py-2"})]})]}),(0,a.jsxs)("div",{className:"bg-white rounded-lg shadow p-6 space-y-4",children:[(0,a.jsx)("h2",{className:"text-lg font-semibold",children:"C\xe0i đặt b\xe1n h\xe0ng"}),(0,a.jsxs)("div",{children:[(0,a.jsx)("label",{className:"block text-sm font-medium text-gray-700",children:"Đơn vị tiền tệ"}),(0,a.jsxs)("select",{value:m.currency||"VND",onChange:e=>j("currency",e.target.value),className:"mt-1 block w-full border rounded-md px-3 py-2",children:[(0,a.jsx)("option",{value:"VND",children:"VND - Việt Nam Đồng"}),(0,a.jsx)("option",{value:"USD",children:"USD - US Dollar"})]})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)("label",{className:"block text-sm font-medium text-gray-700",children:"Thuế VAT (%)"}),(0,a.jsx)("input",{type:"number",value:m.tax_rate||10,onChange:e=>j("tax_rate",Number(e.target.value)),className:"mt-1 block w-full border rounded-md px-3 py-2"})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)("label",{className:"block text-sm font-medium text-gray-700",children:"Ph\xed vận chuyển"}),(0,a.jsx)("input",{type:"number",value:m.shipping_fee||0,onChange:e=>j("shipping_fee",Number(e.target.value)),className:"mt-1 block w-full border rounded-md px-3 py-2"}),(0,a.jsxs)("p",{className:"mt-1 text-sm text-gray-500",children:["Hiện tại: ",_(m.shipping_fee||0)]})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)("label",{className:"block text-sm font-medium text-gray-700",children:"Miễn ph\xed vận chuyển cho đơn h\xe0ng từ"}),(0,a.jsx)("input",{type:"number",value:m.free_shipping_threshold||0,onChange:e=>j("free_shipping_threshold",Number(e.target.value)),className:"mt-1 block w-full border rounded-md px-3 py-2"}),(0,a.jsxs)("p",{className:"mt-1 text-sm text-gray-500",children:["Hiện tại: ",_(m.free_shipping_threshold||0)]})]})]}),(0,a.jsxs)("div",{className:"bg-white rounded-lg shadow p-6 space-y-4",children:[(0,a.jsx)("h2",{className:"text-lg font-semibold",children:"Giờ l\xe0m việc"}),Object.entries(m.business_hours||i.business_hours).map(e=>{let[t,s]=e;return(0,a.jsxs)("div",{className:"grid grid-cols-3 gap-4 items-center",children:[(0,a.jsx)("label",{className:"text-sm font-medium text-gray-700 capitalize",children:"monday"===t?"Thứ 2":"tuesday"===t?"Thứ 3":"wednesday"===t?"Thứ 4":"thursday"===t?"Thứ 5":"friday"===t?"Thứ 6":"saturday"===t?"Thứ 7":"Chủ nhật"}),(0,a.jsx)("input",{type:"time",value:s.open||"09:00",onChange:e=>N(t,"open",e.target.value),className:"border rounded-md px-3 py-2"}),(0,a.jsx)("input",{type:"time",value:s.close||"18:00",onChange:e=>N(t,"close",e.target.value),className:"border rounded-md px-3 py-2"})]},t)})]}),(0,a.jsxs)("div",{className:"bg-white rounded-lg shadow p-6 space-y-4",children:[(0,a.jsx)("h2",{className:"text-lg font-semibold",children:"Mạng x\xe3 hội"}),(0,a.jsxs)("div",{children:[(0,a.jsx)("label",{className:"block text-sm font-medium text-gray-700",children:"Facebook"}),(0,a.jsx)("input",{type:"url",value:(null===(e=m.social_media)||void 0===e?void 0:e.facebook)||"",onChange:e=>k("facebook",e.target.value),placeholder:"https://facebook.com/...",className:"mt-1 block w-full border rounded-md px-3 py-2"})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)("label",{className:"block text-sm font-medium text-gray-700",children:"Instagram"}),(0,a.jsx)("input",{type:"url",value:(null===(t=m.social_media)||void 0===t?void 0:t.instagram)||"",onChange:e=>k("instagram",e.target.value),placeholder:"https://instagram.com/...",className:"mt-1 block w-full border rounded-md px-3 py-2"})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)("label",{className:"block text-sm font-medium text-gray-700",children:"Twitter"}),(0,a.jsx)("input",{type:"url",value:(null===(s=m.social_media)||void 0===s?void 0:s.twitter)||"",onChange:e=>k("twitter",e.target.value),placeholder:"https://twitter.com/...",className:"mt-1 block w-full border rounded-md px-3 py-2"})]})]}),(0,a.jsxs)("div",{className:"bg-white rounded-lg shadow p-6 space-y-4 md:col-span-2",children:[(0,a.jsx)("h2",{className:"text-lg font-semibold",children:"C\xe0i đặt th\xf4ng b\xe1o"}),(0,a.jsxs)("div",{className:"space-y-4",children:[(0,a.jsxs)("div",{className:"flex items-center",children:[(0,a.jsx)("input",{type:"checkbox",checked:(null===(o=m.notification_settings)||void 0===o?void 0:o.order_confirmation)||!0,onChange:e=>w("order_confirmation",e.target.checked),className:"h-4 w-4 text-red-600 focus:ring-red-500 border-gray-300 rounded"}),(0,a.jsx)("label",{className:"ml-2 block text-sm text-gray-900",children:"Gửi email x\xe1c nhận đơn h\xe0ng"})]}),(0,a.jsxs)("div",{className:"flex items-center",children:[(0,a.jsx)("input",{type:"checkbox",checked:(null===(c=m.notification_settings)||void 0===c?void 0:c.shipping_updates)||!0,onChange:e=>w("shipping_updates",e.target.checked),className:"h-4 w-4 text-red-600 focus:ring-red-500 border-gray-300 rounded"}),(0,a.jsx)("label",{className:"ml-2 block text-sm text-gray-900",children:"Gửi cập nhật trạng th\xe1i vận chuyển"})]}),(0,a.jsxs)("div",{className:"flex items-center",children:[(0,a.jsx)("input",{type:"checkbox",checked:(null===(d=m.notification_settings)||void 0===d?void 0:d.promotional_emails)||!0,onChange:e=>w("promotional_emails",e.target.checked),className:"h-4 w-4 text-red-600 focus:ring-red-500 border-gray-300 rounded"}),(0,a.jsx)("label",{className:"ml-2 block text-sm text-gray-900",children:"Gửi email quảng c\xe1o v\xe0 khuyến m\xe3i"})]})]})]})]})]})}},4958:function(e,t,s){"use strict";s.d(t,{O:function(){return a}});let a=(0,s(8714).createClientComponentClient)()}},function(e){e.O(0,[8714,2971,8069,1744],function(){return e(e.s=7941)}),_N_E=e.O()}]);