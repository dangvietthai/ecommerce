(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[9351],{8713:function(e,t,s){Promise.resolve().then(s.bind(s,6755))},5211:function(e,t,s){"use strict";s.d(t,{Z:function(){return a}});let a=(0,s(7977).Z)("Heart",[["path",{d:"M19 14c1.49-1.46 3-3.21 3-5.5A5.5 5.5 0 0 0 16.5 3c-1.76 0-3 .5-4.5 2-1.5-1.5-2.74-2-4.5-2A5.5 5.5 0 0 0 2 8.5c0 2.3 1.5 4.05 3 5.5l7 7Z",key:"c3ymky"}]])},94:function(e,t,s){"use strict";s.d(t,{Z:function(){return a}});let a=(0,s(7977).Z)("Plus",[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"M12 5v14",key:"s699le"}]])},7326:function(e,t,s){"use strict";s.d(t,{Z:function(){return a}});let a=(0,s(7977).Z)("Shield",[["path",{d:"M20 13c0 5-3.5 7.5-7.66 8.95a1 1 0 0 1-.67-.01C7.5 20.5 4 18 4 13V6a1 1 0 0 1 1-1c2 0 4.5-1.2 6.24-2.72a1.17 1.17 0 0 1 1.52 0C14.51 3.81 17 5 19 5a1 1 0 0 1 1 1z",key:"oel41y"}]])},2600:function(e,t,s){"use strict";s.d(t,{Z:function(){return a}});let a=(0,s(7977).Z)("ShoppingBag",[["path",{d:"M6 2 3 6v14a2 2 0 0 0 2 2h14a2 2 0 0 0 2-2V6l-3-4Z",key:"hou9p0"}],["path",{d:"M3 6h18",key:"d0wm0j"}],["path",{d:"M16 10a4 4 0 0 1-8 0",key:"1ltviw"}]])},5879:function(e,t,s){"use strict";s.d(t,{Z:function(){return a}});let a=(0,s(7977).Z)("Star",[["path",{d:"M11.525 2.295a.53.53 0 0 1 .95 0l2.31 4.679a2.123 2.123 0 0 0 1.595 1.16l5.166.756a.53.53 0 0 1 .294.904l-3.736 3.638a2.123 2.123 0 0 0-.611 1.878l.882 5.14a.53.53 0 0 1-.771.56l-4.618-2.428a2.122 2.122 0 0 0-1.973 0L6.396 21.01a.53.53 0 0 1-.77-.56l.881-5.139a2.122 2.122 0 0 0-.611-1.879L2.16 9.795a.53.53 0 0 1 .294-.906l5.165-.755a2.122 2.122 0 0 0 1.597-1.16z",key:"r04s7s"}]])},7664:function(e,t,s){"use strict";s.d(t,{Z:function(){return a}});let a=(0,s(7977).Z)("Truck",[["path",{d:"M14 18V6a2 2 0 0 0-2-2H4a2 2 0 0 0-2 2v11a1 1 0 0 0 1 1h2",key:"wrbu53"}],["path",{d:"M15 18H9",key:"1lyqi6"}],["path",{d:"M19 18h2a1 1 0 0 0 1-1v-3.65a1 1 0 0 0-.22-.624l-3.48-4.35A1 1 0 0 0 17.52 8H14",key:"lysw3i"}],["circle",{cx:"17",cy:"18",r:"2",key:"332jqn"}],["circle",{cx:"7",cy:"18",r:"2",key:"19iecd"}]])},7907:function(e,t,s){"use strict";var a=s(5313);s.o(a,"useParams")&&s.d(t,{useParams:function(){return a.useParams}}),s.o(a,"usePathname")&&s.d(t,{usePathname:function(){return a.usePathname}}),s.o(a,"useRouter")&&s.d(t,{useRouter:function(){return a.useRouter}}),s.o(a,"useSearchParams")&&s.d(t,{useSearchParams:function(){return a.useSearchParams}})},6755:function(e,t,s){"use strict";s.r(t),s.d(t,{default:function(){return j}});var a=s(3827),r=s(4090),i=s(4958),n=s(703),c=s(5879),l=s(7977);let d=(0,l.Z)("Minus",[["path",{d:"M5 12h14",key:"1ays0h"}]]);var o=s(94),m=s(8792),h=s(6288),u=s(7907),x=s(6331),g=s(2600),p=s(5211),y=s(7664),v=s(7326);let f=(0,l.Z)("RotateCcw",[["path",{d:"M3 12a9 9 0 1 0 9-9 9.75 9.75 0 0 0-6.74 2.74L3 8",key:"1357e3"}],["path",{d:"M3 3v5h5",key:"1xhq8a"}]]);function j(e){let{params:t}=e;(0,u.useRouter)();let{addToCart:s}=(0,x.j)(),[l,j]=(0,r.useState)(null),[N,b]=(0,r.useState)([]),[k,w]=(0,r.useState)(""),[_,C]=(0,r.useState)(1),[Z,q]=(0,r.useState)("reviews"),[M,S]=(0,r.useState)([]),[P,T]=(0,r.useState)(!0);(0,r.useEffect)(()=>{(async()=>{try{let{data:r,error:n}=await i.O.from("products").select("\n            *,\n            category:categories(id, name),\n            product_images(id, image_url, is_primary)\n          ").eq("id",t.id).single();if(n)throw n;if(r){var e,s,a;let n=(null===(s=r.product_images)||void 0===s?void 0:null===(e=s.find(e=>e.is_primary))||void 0===e?void 0:e.image_url)||r.image_url,c=(null===(a=r.product_images)||void 0===a?void 0:a.filter(e=>!e.is_primary))||[];j({...r,product_images:c}),w(n);let{data:l}=await i.O.from("products").select("\n              *,\n              category:categories(id, name)\n            ").eq("category_id",r.category_id).neq("id",t.id).limit(4);l&&b(l.map(e=>{var t,s;return{id:e.id.toString(),name:e.name,description:e.description,price:e.price,category_id:e.category_id,image_url:e.image_url,stock_quantity:e.stock_quantity,category:{id:(null===(t=e.category)||void 0===t?void 0:t.id)||"",name:(null===(s=e.category)||void 0===s?void 0:s.name)||"Uncategorized"},rating:0,review_count:0,product_images:[]}}))}}catch(e){console.error("Error fetching product:",e)}finally{T(!1)}})()},[t.id]);let z=(0,r.useCallback)(e=>{"increase"===e?C(e=>e+1):"decrease"===e&&_>1&&C(e=>e-1)},[_]),V=(0,r.useCallback)(()=>{if(l)try{s({id:l.id,name:l.name,price:l.price,image_url:l.image_url,quantity:_}),h.toast.success("Đ\xe3 th\xeam v\xe0o giỏ h\xe0ng")}catch(e){console.error("Error adding to cart:",e),h.toast.error("Kh\xf4ng thể th\xeam v\xe0o giỏ h\xe0ng")}},[l,_,s]);return P?(0,a.jsx)("div",{className:"min-h-screen bg-white flex items-center justify-center",children:(0,a.jsx)("div",{className:"animate-spin rounded-full h-12 w-12 border-t-2 border-b-2 border-red-600"})}):l?(0,a.jsx)("div",{className:"py-8",children:(0,a.jsxs)("div",{className:"container mx-auto px-4",children:[(0,a.jsxs)("div",{className:"text-sm text-gray-600 mb-6",children:[(0,a.jsx)(m.default,{href:"/",className:"hover:text-red-600",children:"Trang chủ"}),(0,a.jsx)("span",{className:"mx-2",children:"/"}),(0,a.jsx)(m.default,{href:"/products",className:"hover:text-red-600",children:"Sản phẩm"}),(0,a.jsx)("span",{className:"mx-2",children:"/"}),(0,a.jsx)(m.default,{href:"/categories/".concat(l.category.id),className:"hover:text-red-600",children:l.category.name}),(0,a.jsx)("span",{className:"mx-2",children:"/"}),(0,a.jsx)("span",{className:"text-gray-900",children:l.name})]}),(0,a.jsxs)("div",{className:"lg:grid lg:grid-cols-2 lg:gap-12",children:[(0,a.jsxs)("div",{className:"lg:col-span-1",children:[(0,a.jsx)("div",{className:"aspect-w-1 aspect-h-1 rounded-lg overflow-hidden bg-gray-50",children:(0,a.jsx)(n.default,{src:k,alt:l.name,width:500,height:500,className:"w-full h-full object-center object-cover",priority:!0,loading:"eager",quality:90,sizes:"(max-width: 768px) 100vw, 50vw"})}),l.product_images&&l.product_images.length>0&&(0,a.jsxs)("div",{className:"mt-4 grid grid-cols-4 gap-4",children:[(0,a.jsx)("button",{onClick:()=>w(l.image_url),className:"relative aspect-square rounded-lg overflow-hidden bg-gray-50 ".concat(k===l.image_url?"ring-2 ring-pink-500":""),children:(0,a.jsx)(n.default,{src:l.image_url,alt:l.name,fill:!0,className:"object-cover",loading:"lazy",quality:75,sizes:"25vw"})}),l.product_images.map(e=>(0,a.jsx)("button",{onClick:()=>w(e.image_url),className:"relative aspect-square rounded-lg overflow-hidden bg-gray-50 ".concat(k===e.image_url?"ring-2 ring-pink-500":""),children:(0,a.jsx)(n.default,{src:e.image_url,alt:l.name,fill:!0,className:"object-cover",loading:"lazy",quality:75,sizes:"25vw"})},e.id))]})]}),(0,a.jsxs)("div",{className:"mt-10 lg:mt-0 lg:col-span-1",children:[(0,a.jsx)("h1",{className:"text-3xl font-extrabold tracking-tight text-gray-900",children:l.name}),(0,a.jsxs)("div",{className:"mt-3",children:[(0,a.jsx)("h2",{className:"sr-only",children:"Th\xf4ng tin sản phẩm"}),(0,a.jsx)("p",{className:"text-3xl text-pink-600",children:new Intl.NumberFormat("vi-VN",{style:"currency",currency:"VND"}).format(l.price)})]}),(0,a.jsxs)("div",{className:"mt-3 flex items-center",children:[(0,a.jsx)("div",{className:"flex items-center",children:[void 0,void 0,void 0,void 0,void 0].map((e,t)=>(0,a.jsx)(c.Z,{className:"h-5 w-5 ".concat(t<Math.floor(l.rating)?"text-yellow-400":"text-gray-200")},t))}),(0,a.jsxs)("p",{className:"ml-2 text-sm text-gray-500",children:[l.rating," (",l.review_count," đ\xe1nh gi\xe1)"]})]}),(0,a.jsxs)("div",{className:"mt-6",children:[(0,a.jsx)("h3",{className:"sr-only",children:"M\xf4 tả"}),(0,a.jsx)("p",{className:"text-base text-gray-700",children:l.description})]}),(0,a.jsx)("div",{className:"mt-8 border-t border-gray-200 pt-8",children:(0,a.jsxs)("div",{className:"flex items-center justify-between",children:[(0,a.jsx)("h3",{className:"text-sm font-medium text-gray-900",children:"Số lượng"}),(0,a.jsxs)("div",{className:"flex items-center border border-gray-300 rounded-md",children:[(0,a.jsx)("button",{disabled:_<=1,onClick:()=>z("decrease"),className:"p-2 text-gray-500 hover:text-gray-700 disabled:opacity-50",children:(0,a.jsx)(d,{className:"h-4 w-4"})}),(0,a.jsx)("span",{className:"px-4 py-2 text-gray-900",children:_}),(0,a.jsx)("button",{onClick:()=>z("increase"),className:"p-2 text-gray-500 hover:text-gray-700",children:(0,a.jsx)(o.Z,{className:"h-4 w-4"})})]})]})}),(0,a.jsxs)("div",{className:"mt-8 flex sm:flex-col1",children:[(0,a.jsxs)("button",{onClick:V,className:"w-full flex items-center justify-center px-8 py-3 border border-transparent text-base font-medium rounded-md shadow-sm text-white bg-pink-600 hover:bg-pink-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-pink-500",children:[(0,a.jsx)(g.Z,{className:"h-5 w-5 mr-2"}),"Th\xeam v\xe0o giỏ h\xe0ng"]}),(0,a.jsxs)("button",{className:"ml-4 py-3 px-3 rounded-md flex items-center justify-center text-gray-400 hover:bg-gray-100 hover:text-pink-500",children:[(0,a.jsx)(p.Z,{className:"h-6 w-6 flex-shrink-0"}),(0,a.jsx)("span",{className:"sr-only",children:"Th\xeam v\xe0o y\xeau th\xedch"})]})]}),(0,a.jsx)("div",{className:"mt-8 border-t border-gray-200 pt-8",children:(0,a.jsxs)("div",{className:"space-y-4",children:[(0,a.jsxs)("div",{className:"flex items-center",children:[(0,a.jsx)(y.Z,{className:"h-5 w-5 text-gray-400 mr-3"}),(0,a.jsx)("p",{className:"text-sm text-gray-700",children:"Miễn ph\xed vận chuyển cho đơn h\xe0ng tr\xean 1.000.000đ"})]}),(0,a.jsxs)("div",{className:"flex items-center",children:[(0,a.jsx)(v.Z,{className:"h-5 w-5 text-gray-400 mr-3"}),(0,a.jsx)("p",{className:"text-sm text-gray-700",children:"Bảo h\xe0nh 2 năm cho tất cả sản phẩm"})]}),(0,a.jsxs)("div",{className:"flex items-center",children:[(0,a.jsx)(f,{className:"h-5 w-5 text-gray-400 mr-3"}),(0,a.jsx)("p",{className:"text-sm text-gray-700",children:"Đổi trả miễn ph\xed trong 30 ng\xe0y"})]})]})})]})]}),(0,a.jsxs)("div",{className:"mt-16",children:[(0,a.jsx)("div",{className:"border-b border-gray-200",children:(0,a.jsxs)("div",{className:"flex space-x-8",children:[(0,a.jsx)("button",{onClick:()=>q("description"),className:"py-4 text-sm font-medium ".concat("description"===Z?"border-b-2 border-pink-500 text-pink-600":"text-gray-500 hover:text-gray-700 hover:border-gray-300"),children:"M\xf4 tả"}),(0,a.jsx)("button",{onClick:()=>q("ingredients"),className:"py-4 text-sm font-medium ".concat("ingredients"===Z?"border-b-2 border-pink-500 text-pink-600":"text-gray-500 hover:text-gray-700 hover:border-gray-300"),children:"Th\xe0nh phần"}),(0,a.jsx)("button",{onClick:()=>q("how-to-use"),className:"py-4 text-sm font-medium ".concat("how-to-use"===Z?"border-b-2 border-pink-500 text-pink-600":"text-gray-500 hover:text-gray-700 hover:border-gray-300"),children:"Hướng dẫn sử dụng"}),(0,a.jsx)("button",{onClick:()=>q("reviews"),className:"py-4 text-sm font-medium ".concat("reviews"===Z?"border-b-2 border-pink-500 text-pink-600":"text-gray-500 hover:text-gray-700 hover:border-gray-300"),children:"Đ\xe1nh gi\xe1"})]})}),(0,a.jsx)("div",{className:"py-8",children:"reviews"===Z&&(0,a.jsxs)("div",{children:[(0,a.jsx)("h3",{className:"text-lg font-medium text-gray-900 mb-4",children:"Đ\xe1nh gi\xe1 từ kh\xe1ch h\xe0ng"}),(0,a.jsx)("div",{className:"space-y-6",children:[1,2,3].map((e,t)=>(0,a.jsxs)("div",{className:"border-b border-gray-200 pb-6",children:[(0,a.jsxs)("div",{className:"flex items-center mb-2",children:[(0,a.jsx)("div",{className:"flex items-center",children:[void 0,void 0,void 0,void 0,void 0].map((e,t)=>(0,a.jsx)(c.Z,{className:"h-4 w-4 text-yellow-400"},t))}),(0,a.jsx)("p",{className:"ml-2 text-sm text-gray-500",children:"5.0"})]}),(0,a.jsx)("h4",{className:"text-sm font-medium text-gray-900",children:"Sản phẩm tuyệt vời!"}),(0,a.jsx)("p",{className:"mt-1 text-sm text-gray-600",children:"T\xf4i đ\xe3 sử dụng sản phẩm n\xe0y được một th\xe1ng v\xe0 c\xf3 thể thấy sự kh\xe1c biệt r\xf5 rệt tr\xean da. Da căng mịn v\xe0 s\xe1ng hơn hẳn."}),(0,a.jsxs)("div",{className:"mt-2 text-sm text-gray-500 flex items-center",children:[(0,a.jsx)("span",{children:"Nguyễn T."}),(0,a.jsx)("span",{className:"mx-1",children:"•"}),(0,a.jsx)("span",{children:"Đ\xe3 mua h\xe0ng"}),(0,a.jsx)("span",{className:"mx-1",children:"•"}),(0,a.jsx)("span",{children:"2 tuần trước"})]})]},t))}),(0,a.jsx)("div",{className:"mt-8 text-center",children:(0,a.jsx)("button",{className:"inline-flex items-center px-4 py-2 border border-pink-600 text-sm font-medium rounded-md text-pink-600 bg-white hover:bg-pink-50",children:"Xem th\xeam đ\xe1nh gi\xe1"})})]})})]}),(0,a.jsxs)("div",{className:"mt-16",children:[(0,a.jsx)("h2",{className:"text-2xl font-bold text-gray-900 mb-8",children:"C\xf3 thể bạn cũng th\xedch"}),(0,a.jsx)("div",{className:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-4 gap-8",children:N.map(e=>(0,a.jsx)("div",{className:"group relative bg-white rounded-lg shadow-sm overflow-hidden hover:shadow-lg transition-shadow duration-300",children:(0,a.jsxs)(m.default,{href:"/products/".concat(e.id),className:"block",children:[(0,a.jsx)("div",{className:"relative aspect-w-4 aspect-h-3 overflow-hidden",children:(0,a.jsx)(n.default,{src:e.image_url,alt:e.name,fill:!0,className:"w-full h-full object-center object-cover group-hover:scale-105 transition-transform duration-300"})}),(0,a.jsxs)("div",{className:"p-4",children:[(0,a.jsx)("h3",{className:"text-sm font-medium text-gray-900",children:e.name}),(0,a.jsx)("p",{className:"mt-1 text-sm text-gray-500",children:e.category.name}),(0,a.jsx)("p",{className:"mt-2 text-sm font-medium text-pink-600",children:new Intl.NumberFormat("vi-VN",{style:"currency",currency:"VND"}).format(e.price)})]})]})},e.id))})]})]})}):(0,a.jsx)("div",{className:"min-h-screen flex items-center justify-center",children:(0,a.jsx)("p",{className:"text-gray-500",children:"Kh\xf4ng t\xecm thấy sản phẩm"})})}},6331:function(e,t,s){"use strict";s.d(t,{j:function(){return i}});var a=s(2020),r=s(5249);let i=(0,a.Ue)()((0,r.tJ)((e,t)=>({items:[],addToCart:t=>{e(e=>e.items.find(e=>e.id===t.id)?{items:e.items.map(e=>e.id===t.id?{...e,quantity:e.quantity+t.quantity}:e)}:{items:[...e.items,t]})},removeFromCart:t=>{e(e=>({items:e.items.filter(e=>e.id!==t)}))},updateQuantity:(t,s)=>{e(e=>({items:e.items.map(e=>e.id===t?{...e,quantity:s}:e)}))},clearCart:()=>{e({items:[]})},getTotalItems:()=>t().items.reduce((e,t)=>e+t.quantity,0),getTotalPrice:()=>t().items.reduce((e,t)=>e+t.price*t.quantity,0)}),{name:"cart-storage",storage:(0,r.FL)(()=>localStorage)}))},4958:function(e,t,s){"use strict";s.d(t,{O:function(){return a}});let a=(0,s(8714).createClientComponentClient)()}},function(e){e.O(0,[8714,8792,703,5558,6288,2971,8069,1744],function(){return e(e.s=8713)}),_N_E=e.O()}]);