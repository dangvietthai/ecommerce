(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[5193],{1053:function(e,s,a){Promise.resolve().then(a.bind(a,9006))},9006:function(e,s,a){"use strict";a.r(s),a.d(s,{default:function(){return l}});var t=a(3827),r=a(4090),i=a(4958),n=a(8141);function l(){let[e,s]=(0,r.useState)([]),[a,l]=(0,r.useState)(!0);(0,r.useEffect)(()=>{!async function(){try{let{data:{user:e},error:a}=await i.O.auth.getUser();if(a)throw a;if(!e){l(!1);return}let{data:t,error:r}=await i.O.from("notifications").select("*").eq("user_id",e.id).order("created_at",{ascending:!1});if(r)throw r;s(t||[])}catch(e){console.error("Error fetching notifications:",e)}finally{l(!1)}}()},[]);let c=async a=>{try{let{error:t}=await i.O.from("notifications").update({is_read:!0}).eq("id",a);if(t)throw t;s(e.map(e=>e.id===a?{...e,is_read:!0}:e))}catch(e){console.error("Error marking notification as read:",e)}},d=async()=>{try{let{data:{user:a},error:t}=await i.O.auth.getUser();if(t)throw t;if(!a)return;let{error:r}=await i.O.from("notifications").update({is_read:!0}).eq("user_id",a.id).eq("is_read",!1);if(r)throw r;s(e.map(e=>({...e,is_read:!0})))}catch(e){console.error("Error marking all notifications as read:",e)}};if(a)return(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)(n.default,{}),(0,t.jsx)("div",{className:"min-h-screen bg-gray-50 py-12",children:(0,t.jsx)("div",{className:"container mx-auto px-4",children:(0,t.jsxs)("div",{className:"animate-pulse",children:[(0,t.jsx)("div",{className:"h-8 bg-gray-200 rounded w-1/4 mb-8"}),(0,t.jsx)("div",{className:"space-y-4",children:[1,2,3].map(e=>(0,t.jsxs)("div",{className:"bg-white rounded-lg shadow-sm p-6",children:[(0,t.jsx)("div",{className:"h-6 bg-gray-200 rounded w-3/4 mb-2"}),(0,t.jsx)("div",{className:"h-4 bg-gray-200 rounded w-1/2"})]},e))})]})})})]});let o=e.filter(e=>!e.is_read).length;return(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)(n.default,{}),(0,t.jsx)("div",{className:"min-h-screen bg-gray-50 py-12",children:(0,t.jsxs)("div",{className:"container mx-auto px-4",children:[(0,t.jsxs)("div",{className:"flex items-center justify-between mb-8",children:[(0,t.jsx)("h1",{className:"text-3xl font-bold text-gray-900",children:"Th\xf4ng b\xe1o"}),o>0&&(0,t.jsxs)("button",{onClick:d,className:"text-blue-600 hover:text-blue-800 flex items-center space-x-2",children:[(0,t.jsx)("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-5 w-5",viewBox:"0 0 20 20",fill:"currentColor",children:(0,t.jsx)("path",{fillRule:"evenodd",d:"M16.707 5.293a1 1 0 010 1.414l-8 8a1 1 0 01-1.414 0l-4-4a1 1 0 011.414-1.414L8 12.586l7.293-7.293a1 1 0 011.414 0z",clipRule:"evenodd"})}),(0,t.jsx)("span",{children:"Đ\xe1nh dấu tất cả đ\xe3 đọc"})]})]}),0===e.length?(0,t.jsx)("div",{className:"text-center py-12",children:(0,t.jsx)("p",{className:"text-gray-500",children:"Bạn chưa c\xf3 th\xf4ng b\xe1o n\xe0o."})}):(0,t.jsx)("div",{className:"space-y-4",children:e.map(e=>(0,t.jsx)("div",{className:"bg-white rounded-lg shadow-sm p-6 ".concat(e.is_read?"":"border-l-4 border-blue-600"),children:(0,t.jsxs)("div",{className:"flex items-start justify-between",children:[(0,t.jsxs)("div",{children:[(0,t.jsx)("h2",{className:"text-lg font-semibold text-gray-900 mb-2",children:e.title}),(0,t.jsx)("p",{className:"text-gray-600",children:e.content}),(0,t.jsx)("p",{className:"text-sm text-gray-500 mt-2",children:new Date(e.created_at).toLocaleString("vi-VN")})]}),!e.is_read&&(0,t.jsx)("button",{onClick:()=>c(e.id),className:"text-blue-600 hover:text-blue-800",children:(0,t.jsx)("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-5 w-5",viewBox:"0 0 20 20",fill:"currentColor",children:(0,t.jsx)("path",{fillRule:"evenodd",d:"M16.707 5.293a1 1 0 010 1.414l-8 8a1 1 0 01-1.414 0l-4-4a1 1 0 011.414-1.414L8 12.586l7.293-7.293a1 1 0 011.414 0z",clipRule:"evenodd"})})})]})},e.id))})]})})]})}}},function(e){e.O(0,[8714,8792,703,5558,8371,3649,8141,2971,8069,1744],function(){return e(e.s=1053)}),_N_E=e.O()}]);