(()=>{var e={};e.id=4122,e.ids=[4122],e.modules={7849:e=>{"use strict";e.exports=require("next/dist/client/components/action-async-storage.external")},2934:e=>{"use strict";e.exports=require("next/dist/client/components/action-async-storage.external.js")},5403:e=>{"use strict";e.exports=require("next/dist/client/components/request-async-storage.external")},4580:e=>{"use strict";e.exports=require("next/dist/client/components/request-async-storage.external.js")},4749:e=>{"use strict";e.exports=require("next/dist/client/components/static-generation-async-storage.external")},5869:e=>{"use strict";e.exports=require("next/dist/client/components/static-generation-async-storage.external.js")},399:e=>{"use strict";e.exports=require("next/dist/compiled/next-server/app-page.runtime.prod.js")},4300:e=>{"use strict";e.exports=require("buffer")},6113:e=>{"use strict";e.exports=require("crypto")},2361:e=>{"use strict";e.exports=require("events")},3685:e=>{"use strict";e.exports=require("http")},5687:e=>{"use strict";e.exports=require("https")},1808:e=>{"use strict";e.exports=require("net")},5477:e=>{"use strict";e.exports=require("punycode")},2781:e=>{"use strict";e.exports=require("stream")},4404:e=>{"use strict";e.exports=require("tls")},7310:e=>{"use strict";e.exports=require("url")},9796:e=>{"use strict";e.exports=require("zlib")},9103:(e,t,r)=>{"use strict";r.r(t),r.d(t,{GlobalError:()=>l.a,__next_app__:()=>u,originalPathname:()=>m,pages:()=>d,routeModule:()=>h,tree:()=>o});var s=r(482),a=r(9108),i=r(2563),l=r.n(i),n=r(8300),c={};for(let e in n)0>["default","tree","pages","GlobalError","originalPathname","__next_app__","routeModule"].indexOf(e)&&(c[e]=()=>n[e]);r.d(t,c);let o=["",{children:["admin",{children:["products",{children:["__PAGE__",{},{page:[()=>Promise.resolve().then(r.bind(r,6530)),"C:\\Users\\dngvieth_23\\OneDrive\\Desktop\\local-shop\\src\\app\\admin\\products\\page.tsx"]}]},{}]},{layout:[()=>Promise.resolve().then(r.bind(r,2050)),"C:\\Users\\dngvieth_23\\OneDrive\\Desktop\\local-shop\\src\\app\\admin\\layout.tsx"]}]},{layout:[()=>Promise.resolve().then(r.bind(r,4563)),"C:\\Users\\dngvieth_23\\OneDrive\\Desktop\\local-shop\\src\\app\\layout.tsx"],"not-found":[()=>Promise.resolve().then(r.t.bind(r,9361,23)),"next/dist/client/components/not-found-error"]}],d=["C:\\Users\\dngvieth_23\\OneDrive\\Desktop\\local-shop\\src\\app\\admin\\products\\page.tsx"],m="/admin/products/page",u={require:r,loadChunk:()=>Promise.resolve()},h=new s.AppPageRouteModule({definition:{kind:a.x.APP_PAGE,page:"/admin/products/page",pathname:"/admin/products",bundlePath:"",filename:"",appPaths:[]},userland:{loaderTree:o}})},7106:(e,t,r)=>{Promise.resolve().then(r.bind(r,6573))},4294:(e,t,r)=>{Promise.resolve().then(r.bind(r,2660))},7751:(e,t,r)=>{"use strict";r.d(t,{Z:()=>s});let s=(0,r(7075).Z)("ChevronRight",[["path",{d:"m9 18 6-6-6-6",key:"mthhwq"}]])},1917:(e,t,r)=>{"use strict";r.d(t,{Z:()=>s});let s=(0,r(7075).Z)("Package",[["path",{d:"M11 21.73a2 2 0 0 0 2 0l7-4A2 2 0 0 0 21 16V8a2 2 0 0 0-1-1.73l-7-4a2 2 0 0 0-2 0l-7 4A2 2 0 0 0 3 8v8a2 2 0 0 0 1 1.73z",key:"1a0edw"}],["path",{d:"M12 22V12",key:"d0xqtd"}],["polyline",{points:"3.29 7 12 12 20.71 7",key:"ousv84"}],["path",{d:"m7.5 4.27 9 5.15",key:"1c824w"}]])},1741:(e,t,r)=>{"use strict";r.d(t,{Z:()=>s});let s=(0,r(7075).Z)("Pencil",[["path",{d:"M21.174 6.812a1 1 0 0 0-3.986-3.987L3.842 16.174a2 2 0 0 0-.5.83l-1.321 4.352a.5.5 0 0 0 .623.622l4.353-1.32a2 2 0 0 0 .83-.497z",key:"1a8usu"}],["path",{d:"m15 5 4 4",key:"1mk7zo"}]])},1838:(e,t,r)=>{"use strict";r.d(t,{Z:()=>s});let s=(0,r(7075).Z)("Plus",[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"M12 5v14",key:"s699le"}]])},9895:(e,t,r)=>{"use strict";r.d(t,{Z:()=>s});let s=(0,r(7075).Z)("Users",[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}],["path",{d:"M22 21v-2a4 4 0 0 0-3-3.87",key:"kshegd"}],["path",{d:"M16 3.13a4 4 0 0 1 0 7.75",key:"1da9ce"}]])},6573:(e,t,r)=>{"use strict";r.r(t),r.d(t,{default:()=>j});var s=r(5344),a=r(3729),i=r(8704),l=r(8428);let n=()=>{let[e,t]=(0,a.useState)(!1),[r,s]=(0,a.useState)(!0);return(0,l.useRouter)(),(0,a.useEffect)(()=>{(async()=>{try{let{data:{session:e}}=await i.O.auth.getSession();if(!e){console.log("❌ No session found"),window.location.href="/";return}let{data:r,error:s}=await i.O.from("users").select("role").eq("email",e.user.email).single();if(s||!r){console.log("❌ Error fetching user data:",s),window.location.href="/";return}if("admin"!==r.role.toLowerCase()){console.log("❌ User is not admin"),window.location.href="/";return}console.log("✅ User is admin"),t(!0)}catch(e){console.error("❌ Error checking admin status:",e),window.location.href="/"}finally{s(!1)}})()},[]),{isAdmin:e,isLoading:r}};var c=r(6506),o=r(7075);let d=(0,o.Z)("LayoutDashboard",[["rect",{width:"7",height:"9",x:"3",y:"3",rx:"1",key:"10lvy0"}],["rect",{width:"7",height:"5",x:"14",y:"3",rx:"1",key:"16une8"}],["rect",{width:"7",height:"9",x:"14",y:"12",rx:"1",key:"1hutg5"}],["rect",{width:"7",height:"5",x:"3",y:"16",rx:"1",key:"ldoo1y"}]]);var m=r(1917);let u=(0,o.Z)("Tags",[["path",{d:"m15 5 6.3 6.3a2.4 2.4 0 0 1 0 3.4L17 19",key:"1cbfv1"}],["path",{d:"M9.586 5.586A2 2 0 0 0 8.172 5H3a1 1 0 0 0-1 1v5.172a2 2 0 0 0 .586 1.414L8.29 18.29a2.426 2.426 0 0 0 3.42 0l3.58-3.58a2.426 2.426 0 0 0 0-3.42z",key:"135mg7"}],["circle",{cx:"6.5",cy:"9.5",r:".5",fill:"currentColor",key:"5pm5xn"}]]),h=(0,o.Z)("Percent",[["line",{x1:"19",x2:"5",y1:"5",y2:"19",key:"1x9vlm"}],["circle",{cx:"6.5",cy:"6.5",r:"2.5",key:"4mh3h7"}],["circle",{cx:"17.5",cy:"17.5",r:"2.5",key:"1mdrzq"}]]);var p=r(9895),x=r(2401),g=r(3746);let y=(0,o.Z)("ChevronLeft",[["path",{d:"m15 18-6-6 6-6",key:"1wnfg3"}]]);var f=r(7751),b=r(8120);function j({children:e}){let{isAdmin:t,isLoading:r}=n(),o=(0,l.usePathname)(),j=(0,l.useRouter)(),[v,w]=(0,a.useState)(!1),[N,_]=(0,a.useState)(!1),k=[{title:"Tổng quan",icon:s.jsx(d,{className:"w-5 h-5"}),href:"/admin"},{title:"Sản phẩm",icon:s.jsx(m.Z,{className:"w-5 h-5"}),href:"/admin/products"},{title:"Danh mục",icon:s.jsx(u,{className:"w-5 h-5"}),href:"/admin/categories"},{title:"Khuyến m\xe3i",icon:s.jsx(h,{className:"w-5 h-5"}),href:"/admin/promotions"},{title:"Người d\xf9ng",icon:s.jsx(p.Z,{className:"w-5 h-5"}),href:"/admin/users"},{title:"Đơn h\xe0ng",icon:s.jsx(x.Z,{className:"w-5 h-5"}),href:"/admin/orders"}],C={title:"Quản trị",icon:s.jsx(g.Z,{className:"w-5 h-5"}),href:"/admin/settings"},q=async()=>{await i.O.auth.signOut(),j.push("/")};return r?s.jsx("div",{className:"flex items-center justify-center min-h-screen",children:s.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-t-2 border-b-2 border-red-600"})}):t?(0,s.jsxs)("div",{className:"flex min-h-screen bg-gray-100",children:[s.jsx("button",{onClick:()=>w(!v),className:`lg:hidden fixed top-[73px] z-[15] p-1.5 rounded-r-md bg-white/80 backdrop-blur-sm shadow-sm hover:bg-white/90 transition-all duration-200 ease-in-out ${v?"left-64":"left-0"}`,children:v?s.jsx(y,{className:"w-4 h-4 text-gray-500"}):s.jsx(f.Z,{className:"w-4 h-4 text-gray-500"})}),s.jsx("div",{className:`
        fixed lg:static inset-y-0 left-0 z-40 lg:z-0
        w-64 bg-white shadow-lg transform lg:transform-none transition-transform duration-200 ease-in-out
        ${v?"translate-x-0":"-translate-x-full lg:translate-x-0"}
      `,children:(0,s.jsxs)("div",{className:"flex flex-col h-full",children:[s.jsx("div",{className:"p-4 border-b cursor-default",onClick:e=>e.stopPropagation(),children:s.jsx("h1",{className:"text-xl font-bold text-gray-800",children:"Admin Dashboard"})}),s.jsx("nav",{className:"flex-1 p-4",children:s.jsx("ul",{className:"space-y-2",children:k.map(e=>{let t=o===e.href;return s.jsx("li",{children:(0,s.jsxs)(c.default,{href:e.href,onClick:()=>w(!1),className:`flex items-center space-x-3 p-3 rounded-lg transition-colors ${t?"bg-red-50 text-red-600":"text-gray-600 hover:bg-gray-50"}`,children:[e.icon,s.jsx("span",{children:e.title})]})},e.href)})})}),(0,s.jsxs)("div",{className:"p-4 border-t space-y-2",children:[(0,s.jsxs)(c.default,{href:C.href,onClick:()=>w(!1),className:`flex items-center space-x-3 p-3 rounded-lg transition-colors ${o===C.href?"bg-red-50 text-red-600":"text-gray-600 hover:bg-gray-50"}`,children:[C.icon,s.jsx("span",{children:C.title})]}),(0,s.jsxs)("button",{onClick:q,className:"flex items-center space-x-3 text-gray-600 hover:text-red-600 transition-colors w-full p-3 rounded-lg",children:[s.jsx(b.Z,{className:"w-5 h-5"}),s.jsx("span",{children:"Đăng xuất"})]})]})]})}),s.jsx("div",{className:"flex-1 p-4 lg:p-8",children:s.jsx("div",{className:"max-w-7xl mx-auto",children:e})})]}):null}},2660:(e,t,r)=>{"use strict";r.r(t),r.d(t,{default:()=>m});var s=r(5344),a=r(3729),i=r(8704),l=r(1838),n=r(8765),c=r(1741),o=r(8271),d=r(9410);function m(){let[e,t]=(0,a.useState)([]),[r,m]=(0,a.useState)([]),[u,h]=(0,a.useState)(!0),[p,x]=(0,a.useState)(""),[g,y]=(0,a.useState)(!1),[f,b]=(0,a.useState)(!1),[j,v]=(0,a.useState)(null),[w,N]=(0,a.useState)({name:"",description:"",price:0,category_id:"",stock_quantity:0,image_url:"",is_active:!0,is_new:!0,is_featured:!1,is_bestseller:!1,slug:""}),[_,k]=(0,a.useState)(null),[C,q]=(0,a.useState)([]),[O,P]=(0,a.useState)(""),[S,D]=(0,a.useState)([]);(0,a.useEffect)(()=>{M(),Z()},[]);let M=async()=>{try{let{data:e,error:r}=await i.O.from("products").select(`
          *,
          categories (
            name
          ),
          product_images (
            image_url,
            is_primary
          )
        `).order("created_at",{ascending:!1});if(r)throw r;let s=e.map(e=>({...e,category:e.categories?.name||"Uncategorized",image_url:e.product_images?.find(e=>e.is_primary)?.image_url||e.image_url}));t(s)}catch(e){console.error("Error fetching products:",e)}finally{h(!1)}},Z=async()=>{try{let{data:e,error:t}=await i.O.from("categories").select("*").order("name",{ascending:!0});if(t)throw t;m(e||[])}catch(e){console.error("Error fetching categories:",e)}},L=async()=>{try{if(console.log("Adding product:",w),!w.name||!w.category_id||!w.price||!_){alert("Vui l\xf2ng điền đầy đủ th\xf4ng tin bắt buộc");return}let e=w.name.toLowerCase().replace(/[^a-z0-9]+/g,"-").replace(/(^-|-$)/g,""),t="";if(_){let e=`products/${Date.now()}-${_.name}`,{data:r,error:s}=await i.O.storage.from("products").upload(e,_);if(s)throw s;let{data:{publicUrl:a}}=i.O.storage.from("products").getPublicUrl(e);t=a}let{data:r,error:s}=await i.O.from("products").insert([{name:w.name,slug:e,description:w.description,price:w.price,category_id:w.category_id,stock_quantity:w.stock_quantity,image_url:t,is_active:w.is_active,is_new:w.is_new,is_featured:w.is_featured,is_bestseller:w.is_bestseller}]).select().single();if(s)throw console.error("Supabase error:",s),s;if(t){let{error:e}=await i.O.from("product_images").insert([{product_id:r.id,image_url:t,is_primary:!0,display_order:0}]);if(e)throw e}for(let e=0;e<C.length;e++){let t=C[e],s=`products/${Date.now()}-${t.name}`,{error:a}=await i.O.storage.from("products").upload(s,t);if(a)throw a;let{data:{publicUrl:l}}=i.O.storage.from("products").getPublicUrl(s),{error:n}=await i.O.from("product_images").insert([{product_id:r.id,image_url:l,is_primary:!1,display_order:e+1}]);if(n)throw n}console.log("Product added successfully:",r),y(!1),N({name:"",description:"",price:0,category_id:"",stock_quantity:0,image_url:"",is_active:!0,is_new:!0,is_featured:!1,is_bestseller:!1,slug:""}),k(null),q([]),P(""),D([]),M()}catch(e){console.error("Error adding product:",e),alert("C\xf3 lỗi xảy ra khi th\xeam sản phẩm. Vui l\xf2ng thử lại.")}},$=async e=>{if(confirm("Bạn c\xf3 chắc chắn muốn x\xf3a sản phẩm n\xe0y?"))try{let{error:t}=await i.O.from("products").delete().eq("id",e);if(t)throw t;M()}catch(e){console.error("Error deleting product:",e)}},E=e=>{let t=e.target.files?.[0];if(t){k(t);let e=new FileReader;e.onloadend=()=>{P(e.result),N(t=>({...t,image_url:e.result}))},e.readAsDataURL(t)}},U=e=>{let t=Array.from(e.target.files||[]);q(e=>[...e,...t]),t.forEach(e=>{let t=new FileReader;t.onloadend=()=>{D(e=>[...e,t.result])},t.readAsDataURL(e)})},A=e=>{q(t=>t.filter((t,r)=>r!==e)),D(t=>t.filter((t,r)=>r!==e)),N(t=>({...t,image_url:t.image_url.split(",").filter((t,r)=>r!==e).join(",")}))},T=async e=>{try{let{data:t,error:r}=await i.O.from("product_images").select("*").eq("product_id",e.id).eq("is_primary",!1).order("display_order");if(r)throw r;v({...e,product_images:t||[]}),b(!0),P(""),k(null),q([]),D([])}catch(e){console.error("Error fetching product images:",e)}},z=async()=>{if(j)try{if(!j.name||!j.category_id||!j.price){alert("Vui l\xf2ng điền đầy đủ th\xf4ng tin bắt buộc");return}let e=j.name.toLowerCase().replace(/[^a-z0-9]+/g,"-").replace(/(^-|-$)/g,""),t=j.image_url;if(_){let e=`products/${Date.now()}-${_.name}`,{data:r,error:s}=await i.O.storage.from("products").upload(e,_);if(s)throw s;let{data:{publicUrl:a}}=i.O.storage.from("products").getPublicUrl(e);t=a;let{error:l}=await i.O.from("product_images").delete().eq("product_id",j.id).eq("is_primary",!0);if(l)throw l;let{error:n}=await i.O.from("product_images").insert({product_id:j.id,image_url:t,is_primary:!0,display_order:0});if(n)throw n}let{error:r}=await i.O.from("products").update({name:j.name,slug:e,description:j.description,price:j.price,category_id:j.category_id,stock_quantity:j.stock_quantity,image_url:t,is_active:j.is_active,is_new:j.is_new,is_featured:j.is_featured,is_bestseller:j.is_bestseller,updated_at:new Date().toISOString()}).eq("id",j.id);if(r)throw r;for(let e=0;e<C.length;e++){let t=C[e],r=`products/${Date.now()}-${t.name}`,{error:s}=await i.O.storage.from("products").upload(r,t);if(s)throw s;let{data:{publicUrl:a}}=i.O.storage.from("products").getPublicUrl(r),{error:l}=await i.O.from("product_images").insert([{product_id:j.id,image_url:a,is_primary:!1,display_order:e+1}]);if(l)throw l}await M(),b(!1),v(null),k(null),P(""),q([]),D([])}catch(e){console.error("Error updating product:",e),alert("C\xf3 lỗi xảy ra khi cập nhật sản phẩm")}},R=e.filter(e=>e.name.toLowerCase().includes(p.toLowerCase())||(e.category||"").toLowerCase().includes(p.toLowerCase())),G=e=>new Intl.NumberFormat("vi-VN",{style:"currency",currency:"VND"}).format(e);return u?s.jsx("div",{className:"flex items-center justify-center min-h-[400px]",children:s.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-t-2 border-b-2 border-red-600"})}):(0,s.jsxs)("div",{className:"space-y-6",children:[(0,s.jsxs)("div",{className:"flex justify-between items-center",children:[s.jsx("h1",{className:"text-2xl font-bold",children:"Quản l\xfd sản phẩm"}),(0,s.jsxs)("button",{onClick:()=>y(!0),className:"bg-red-600 text-white px-4 py-2 rounded-lg flex items-center space-x-2 hover:bg-red-700 transition-colors",children:[s.jsx(l.Z,{className:"w-5 h-5"}),s.jsx("span",{children:"Th\xeam sản phẩm"})]})]}),(0,s.jsxs)("div",{className:"relative",children:[s.jsx("input",{type:"text",placeholder:"T\xecm kiếm sản phẩm...",value:p,onChange:e=>x(e.target.value),className:"w-full pl-10 pr-4 py-2 border rounded-lg"}),s.jsx(n.Z,{className:"w-5 h-5 text-gray-400 absolute left-3 top-2.5"})]}),s.jsx("div",{className:"bg-white rounded-lg shadow overflow-hidden",children:(0,s.jsxs)("table",{className:"min-w-full divide-y divide-gray-200",children:[s.jsx("thead",{className:"bg-gray-50",children:(0,s.jsxs)("tr",{children:[s.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Sản phẩm"}),s.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Danh mục"}),s.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Gi\xe1"}),s.jsx("th",{className:"px-6 py-3 text-right text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Thao t\xe1c"})]})}),s.jsx("tbody",{className:"bg-white divide-y divide-gray-200",children:R.map(e=>(0,s.jsxs)("tr",{className:"hover:bg-gray-50",children:[s.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:(0,s.jsxs)("div",{className:"flex items-center space-x-3",children:[s.jsx("div",{className:"flex-shrink-0 h-10 w-10 relative",children:s.jsx(d.default,{src:e.image_url||"/placeholder.png",alt:e.name,fill:!0,className:"rounded-lg object-cover"})}),(0,s.jsxs)("div",{children:[s.jsx("div",{className:"font-medium text-gray-900",children:e.name}),s.jsx("div",{className:"text-sm text-gray-500 truncate max-w-xs",children:e.description})]})]})}),s.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:s.jsx("span",{className:"px-2 inline-flex text-xs leading-5 font-semibold rounded-full bg-green-100 text-green-800",children:e.category||"Chưa ph\xe2n loại"})}),s.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-500",children:G(e.price)}),(0,s.jsxs)("td",{className:"px-6 py-4 whitespace-nowrap text-right text-sm font-medium",children:[s.jsx("button",{onClick:()=>T(e),className:"text-indigo-600 hover:text-indigo-900 mr-4",children:s.jsx(c.Z,{className:"w-5 h-5"})}),s.jsx("button",{onClick:()=>$(e.id),className:"text-red-600 hover:text-red-900",children:s.jsx(o.Z,{className:"w-5 h-5"})})]})]},e.id))})]})}),g&&s.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center p-4",style:{marginTop:0},children:(0,s.jsxs)("div",{className:"bg-white rounded-lg p-6 max-w-4xl w-full",children:[s.jsx("h2",{className:"text-xl font-bold py-4 border-b",children:"Th\xeam sản phẩm mới"}),(0,s.jsxs)("div",{className:"grid grid-cols-2 gap-6 mt-4",children:[(0,s.jsxs)("div",{className:"space-y-4",children:[(0,s.jsxs)("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700",children:"T\xean sản phẩm"}),s.jsx("input",{type:"text",value:w.name,onChange:e=>N({...w,name:e.target.value}),className:"mt-1 block w-full border rounded-md px-3 py-2"})]}),(0,s.jsxs)("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700",children:"M\xf4 tả"}),s.jsx("textarea",{value:w.description,onChange:e=>N({...w,description:e.target.value}),className:"mt-1 block w-full border rounded-md px-3 py-2",rows:3})]}),(0,s.jsxs)("div",{className:"grid grid-cols-2 gap-4",children:[(0,s.jsxs)("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700",children:"Gi\xe1"}),s.jsx("input",{type:"number",value:w.price,onChange:e=>N({...w,price:Number(e.target.value)}),className:"mt-1 block w-full border rounded-md px-3 py-2"})]}),(0,s.jsxs)("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700",children:"Số lượng"}),s.jsx("input",{type:"number",value:w.stock_quantity,onChange:e=>N({...w,stock_quantity:Number(e.target.value)}),className:"mt-1 block w-full border rounded-md px-3 py-2"})]})]}),(0,s.jsxs)("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700",children:"Danh mục"}),(0,s.jsxs)("select",{value:w.category_id,onChange:e=>N({...w,category_id:e.target.value}),className:"mt-1 block w-full border rounded-md px-3 py-2",children:[s.jsx("option",{value:"",children:"Chọn danh mục"}),r.map(e=>s.jsx("option",{value:e.id,children:e.name},e.id))]})]})]}),(0,s.jsxs)("div",{className:"space-y-4",children:[(0,s.jsxs)("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700",children:"Ảnh ch\xednh"}),(0,s.jsxs)("div",{className:"mt-1 flex items-center space-x-4",children:[s.jsx("div",{className:"relative w-32 h-32 border rounded-md overflow-hidden",children:O?s.jsx("img",{src:O,alt:"Main product",className:"w-full h-full object-cover"}):s.jsx("div",{className:"w-full h-full flex items-center justify-center bg-gray-50",children:s.jsx("span",{className:"text-gray-400",children:"Chưa c\xf3 ảnh"})})}),s.jsx("div",{children:(0,s.jsxs)("label",{className:"cursor-pointer bg-white border border-gray-300 rounded-md px-4 py-2 text-sm font-medium text-gray-700 hover:bg-gray-50",children:["Chọn ảnh",s.jsx("input",{type:"file",accept:"image/*",onChange:E,className:"hidden"})]})})]})]}),(0,s.jsxs)("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700",children:"Ảnh phụ"}),(0,s.jsxs)("div",{className:"mt-1",children:[s.jsx("div",{className:"grid grid-cols-3 gap-4",children:S.map((e,t)=>(0,s.jsxs)("div",{className:"relative group",children:[s.jsx("img",{src:e,alt:`Additional ${t+1}`,className:"w-full h-32 object-cover rounded-md"}),s.jsx("button",{onClick:()=>A(t),className:"absolute top-2 right-2 bg-red-500 text-white rounded-full p-1 opacity-0 group-hover:opacity-100 transition-opacity",children:s.jsx("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:s.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"})})})]},t))}),s.jsx("div",{className:"mt-4",children:(0,s.jsxs)("label",{className:"cursor-pointer bg-white border border-gray-300 rounded-md px-4 py-2 text-sm font-medium text-gray-700 hover:bg-gray-50",children:["Th\xeam ảnh phụ",s.jsx("input",{type:"file",accept:"image/*",multiple:!0,onChange:U,className:"hidden"})]})})]})]}),s.jsx("div",{className:"flex items-center",children:(0,s.jsxs)("label",{className:"flex items-center cursor-pointer",children:[s.jsx("input",{type:"checkbox",checked:w.is_active,onChange:e=>N({...w,is_active:e.target.checked}),className:"h-4 w-4 text-red-600 focus:ring-red-500 border-gray-300 rounded"}),s.jsx("span",{className:"ml-2 block text-sm text-gray-900",children:"K\xedch hoạt ngay"})]})})]})]}),(0,s.jsxs)("div",{className:"mt-6 pt-4 border-t flex justify-end space-x-3",children:[s.jsx("button",{onClick:()=>y(!1),className:"px-4 py-2 border rounded-md hover:bg-gray-50",children:"Hủy"}),s.jsx("button",{onClick:L,className:"px-4 py-2 bg-red-600 text-white rounded-md hover:bg-red-700",children:"Th\xeam"})]})]})}),f&&j&&s.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center p-4",style:{marginTop:0},children:(0,s.jsxs)("div",{className:"bg-white rounded-lg p-6 max-w-4xl w-full",children:[s.jsx("h2",{className:"text-xl font-bold py-4 border-b",children:"Sửa sản phẩm"}),(0,s.jsxs)("div",{className:"grid grid-cols-2 gap-6 mt-4",children:[(0,s.jsxs)("div",{className:"space-y-4",children:[(0,s.jsxs)("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700",children:"T\xean sản phẩm"}),s.jsx("input",{type:"text",value:j.name,onChange:e=>v({...j,name:e.target.value}),className:"mt-1 block w-full border rounded-md px-3 py-2"})]}),(0,s.jsxs)("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700",children:"M\xf4 tả"}),s.jsx("textarea",{value:j.description,onChange:e=>v({...j,description:e.target.value}),className:"mt-1 block w-full border rounded-md px-3 py-2",rows:3})]}),(0,s.jsxs)("div",{className:"grid grid-cols-2 gap-4",children:[(0,s.jsxs)("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700",children:"Gi\xe1"}),s.jsx("input",{type:"number",value:j.price,onChange:e=>v({...j,price:Number(e.target.value)}),className:"mt-1 block w-full border rounded-md px-3 py-2"})]}),(0,s.jsxs)("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700",children:"Số lượng"}),s.jsx("input",{type:"number",value:j.stock_quantity,onChange:e=>v({...j,stock_quantity:Number(e.target.value)}),className:"mt-1 block w-full border rounded-md px-3 py-2"})]})]}),(0,s.jsxs)("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700",children:"Danh mục"}),(0,s.jsxs)("select",{value:j.category_id,onChange:e=>v({...j,category_id:e.target.value}),className:"mt-1 block w-full border rounded-md px-3 py-2",children:[s.jsx("option",{value:"",children:"Chọn danh mục"}),r.map(e=>s.jsx("option",{value:e.id,children:e.name},e.id))]})]})]}),(0,s.jsxs)("div",{className:"space-y-4",children:[(0,s.jsxs)("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700",children:"Ảnh ch\xednh"}),(0,s.jsxs)("div",{className:"mt-1 flex items-center space-x-4",children:[s.jsx("div",{className:"relative w-32 h-32 border rounded-md overflow-hidden",children:O||j.image_url?s.jsx("img",{src:O||j.image_url,alt:"Main product",className:"w-full h-full object-cover"}):s.jsx("div",{className:"w-full h-full flex items-center justify-center bg-gray-50",children:s.jsx("span",{className:"text-gray-400",children:"Chưa c\xf3 ảnh"})})}),s.jsx("div",{children:(0,s.jsxs)("label",{className:"cursor-pointer bg-white border border-gray-300 rounded-md px-4 py-2 text-sm font-medium text-gray-700 hover:bg-gray-50",children:["Chọn ảnh",s.jsx("input",{type:"file",accept:"image/*",onChange:E,className:"hidden"})]})})]})]}),(0,s.jsxs)("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700",children:"Ảnh phụ"}),(0,s.jsxs)("div",{className:"mt-1",children:[(0,s.jsxs)("div",{className:"grid grid-cols-3 gap-4",children:[j.product_images?.map((e,t)=>s.jsxs("div",{className:"relative group",children:[s.jsx("img",{src:e.image_url,alt:`Additional ${t+1}`,className:"w-full h-32 object-cover rounded-md"}),s.jsx("button",{onClick:async()=>{try{let{error:t}=await i.O.from("product_images").delete().eq("id",e.id);if(t)throw t;v({...j,product_images:j.product_images?.filter(t=>t.id!==e.id)})}catch(e){console.error("Error deleting image:",e)}},className:"absolute top-2 right-2 bg-red-500 text-white rounded-full p-1 opacity-0 group-hover:opacity-100 transition-opacity",children:s.jsx("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:s.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"})})})]},e.id)),S.map((e,t)=>(0,s.jsxs)("div",{className:"relative group",children:[s.jsx("img",{src:e,alt:`New Additional ${t+1}`,className:"w-full h-32 object-cover rounded-md"}),s.jsx("button",{onClick:()=>{q(e=>e.filter((e,r)=>r!==t)),D(e=>e.filter((e,r)=>r!==t))},className:"absolute top-2 right-2 bg-red-500 text-white rounded-full p-1 opacity-0 group-hover:opacity-100 transition-opacity",children:s.jsx("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:s.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"})})})]},`new-${t}`))]}),s.jsx("div",{className:"mt-4",children:(0,s.jsxs)("label",{className:"cursor-pointer bg-white border border-gray-300 rounded-md px-4 py-2 text-sm font-medium text-gray-700 hover:bg-gray-50",children:["Th\xeam ảnh phụ",s.jsx("input",{type:"file",accept:"image/*",multiple:!0,onChange:U,className:"hidden"})]})})]})]}),s.jsx("div",{className:"flex items-center",children:(0,s.jsxs)("label",{className:"flex items-center cursor-pointer",children:[s.jsx("input",{type:"checkbox",checked:j.is_active,onChange:e=>v({...j,is_active:e.target.checked}),className:"h-4 w-4 text-red-600 focus:ring-red-500 border-gray-300 rounded"}),s.jsx("span",{className:"ml-2 block text-sm text-gray-900",children:"K\xedch hoạt"})]})})]})]}),(0,s.jsxs)("div",{className:"mt-6 pt-4 border-t flex justify-end space-x-3",children:[s.jsx("button",{onClick:()=>{b(!1),v(null)},className:"px-4 py-2 border rounded-md hover:bg-gray-50",children:"Hủy"}),s.jsx("button",{onClick:z,className:"px-4 py-2 bg-red-600 text-white rounded-md hover:bg-red-700",children:"Cập nhật"})]})]})})]})}},2050:(e,t,r)=>{"use strict";r.r(t),r.d(t,{$$typeof:()=>i,__esModule:()=>a,default:()=>l});let s=(0,r(6843).createProxy)(String.raw`C:\Users\dngvieth_23\OneDrive\Desktop\local-shop\src\app\admin\layout.tsx`),{__esModule:a,$$typeof:i}=s,l=s.default},6530:(e,t,r)=>{"use strict";r.r(t),r.d(t,{$$typeof:()=>i,__esModule:()=>a,default:()=>l});let s=(0,r(6843).createProxy)(String.raw`C:\Users\dngvieth_23\OneDrive\Desktop\local-shop\src\app\admin\products\page.tsx`),{__esModule:a,$$typeof:i}=s,l=s.default}};var t=require("../../../webpack-runtime.js");t.C(e);var r=e=>t(t.s=e),s=t.X(0,[1638,9572,5321],()=>r(9103));module.exports=s})();