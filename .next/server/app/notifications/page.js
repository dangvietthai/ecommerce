(()=>{var e={};e.id=5193,e.ids=[5193],e.modules={7849:e=>{"use strict";e.exports=require("next/dist/client/components/action-async-storage.external")},2934:e=>{"use strict";e.exports=require("next/dist/client/components/action-async-storage.external.js")},5403:e=>{"use strict";e.exports=require("next/dist/client/components/request-async-storage.external")},4580:e=>{"use strict";e.exports=require("next/dist/client/components/request-async-storage.external.js")},4749:e=>{"use strict";e.exports=require("next/dist/client/components/static-generation-async-storage.external")},5869:e=>{"use strict";e.exports=require("next/dist/client/components/static-generation-async-storage.external.js")},399:e=>{"use strict";e.exports=require("next/dist/compiled/next-server/app-page.runtime.prod.js")},4300:e=>{"use strict";e.exports=require("buffer")},6113:e=>{"use strict";e.exports=require("crypto")},2361:e=>{"use strict";e.exports=require("events")},3685:e=>{"use strict";e.exports=require("http")},5687:e=>{"use strict";e.exports=require("https")},1808:e=>{"use strict";e.exports=require("net")},5477:e=>{"use strict";e.exports=require("punycode")},2781:e=>{"use strict";e.exports=require("stream")},4404:e=>{"use strict";e.exports=require("tls")},7310:e=>{"use strict";e.exports=require("url")},9796:e=>{"use strict";e.exports=require("zlib")},4246:(e,t,s)=>{"use strict";s.r(t),s.d(t,{GlobalError:()=>n.a,__next_app__:()=>x,originalPathname:()=>u,pages:()=>d,routeModule:()=>p,tree:()=>c});var r=s(482),i=s(9108),a=s(2563),n=s.n(a),o=s(8300),l={};for(let e in o)0>["default","tree","pages","GlobalError","originalPathname","__next_app__","routeModule"].indexOf(e)&&(l[e]=()=>o[e]);s.d(t,l);let c=["",{children:["notifications",{children:["__PAGE__",{},{page:[()=>Promise.resolve().then(s.bind(s,2148)),"C:\\Users\\dngvieth_23\\OneDrive\\Desktop\\local-shop\\src\\app\\notifications\\page.tsx"]}]},{}]},{layout:[()=>Promise.resolve().then(s.bind(s,4563)),"C:\\Users\\dngvieth_23\\OneDrive\\Desktop\\local-shop\\src\\app\\layout.tsx"],"not-found":[()=>Promise.resolve().then(s.t.bind(s,9361,23)),"next/dist/client/components/not-found-error"]}],d=["C:\\Users\\dngvieth_23\\OneDrive\\Desktop\\local-shop\\src\\app\\notifications\\page.tsx"],u="/notifications/page",x={require:s,loadChunk:()=>Promise.resolve()},p=new r.AppPageRouteModule({definition:{kind:i.x.APP_PAGE,page:"/notifications/page",pathname:"/notifications",bundlePath:"",filename:"",appPaths:[]},userland:{loaderTree:c}})},3124:(e,t,s)=>{Promise.resolve().then(s.bind(s,2655))},2655:(e,t,s)=>{"use strict";s.r(t),s.d(t,{default:()=>o});var r=s(5344),i=s(3729),a=s(8704),n=s(59);function o(){let[e,t]=(0,i.useState)([]),[s,o]=(0,i.useState)(!0);(0,i.useEffect)(()=>{(async function(){try{let{data:{user:e},error:s}=await a.O.auth.getUser();if(s)throw s;if(!e){o(!1);return}let{data:r,error:i}=await a.O.from("notifications").select("*").eq("user_id",e.id).order("created_at",{ascending:!1});if(i)throw i;t(r||[])}catch(e){console.error("Error fetching notifications:",e)}finally{o(!1)}})()},[]);let l=async s=>{try{let{error:r}=await a.O.from("notifications").update({is_read:!0}).eq("id",s);if(r)throw r;t(e.map(e=>e.id===s?{...e,is_read:!0}:e))}catch(e){console.error("Error marking notification as read:",e)}},c=async()=>{try{let{data:{user:s},error:r}=await a.O.auth.getUser();if(r)throw r;if(!s)return;let{error:i}=await a.O.from("notifications").update({is_read:!0}).eq("user_id",s.id).eq("is_read",!1);if(i)throw i;t(e.map(e=>({...e,is_read:!0})))}catch(e){console.error("Error marking all notifications as read:",e)}};if(s)return(0,r.jsxs)(r.Fragment,{children:[r.jsx(n.default,{}),r.jsx("div",{className:"min-h-screen bg-gray-50 py-12",children:r.jsx("div",{className:"container mx-auto px-4",children:(0,r.jsxs)("div",{className:"animate-pulse",children:[r.jsx("div",{className:"h-8 bg-gray-200 rounded w-1/4 mb-8"}),r.jsx("div",{className:"space-y-4",children:[1,2,3].map(e=>(0,r.jsxs)("div",{className:"bg-white rounded-lg shadow-sm p-6",children:[r.jsx("div",{className:"h-6 bg-gray-200 rounded w-3/4 mb-2"}),r.jsx("div",{className:"h-4 bg-gray-200 rounded w-1/2"})]},e))})]})})})]});let d=e.filter(e=>!e.is_read).length;return(0,r.jsxs)(r.Fragment,{children:[r.jsx(n.default,{}),r.jsx("div",{className:"min-h-screen bg-gray-50 py-12",children:(0,r.jsxs)("div",{className:"container mx-auto px-4",children:[(0,r.jsxs)("div",{className:"flex items-center justify-between mb-8",children:[r.jsx("h1",{className:"text-3xl font-bold text-gray-900",children:"Th\xf4ng b\xe1o"}),d>0&&(0,r.jsxs)("button",{onClick:c,className:"text-blue-600 hover:text-blue-800 flex items-center space-x-2",children:[r.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-5 w-5",viewBox:"0 0 20 20",fill:"currentColor",children:r.jsx("path",{fillRule:"evenodd",d:"M16.707 5.293a1 1 0 010 1.414l-8 8a1 1 0 01-1.414 0l-4-4a1 1 0 011.414-1.414L8 12.586l7.293-7.293a1 1 0 011.414 0z",clipRule:"evenodd"})}),r.jsx("span",{children:"Đ\xe1nh dấu tất cả đ\xe3 đọc"})]})]}),0===e.length?r.jsx("div",{className:"text-center py-12",children:r.jsx("p",{className:"text-gray-500",children:"Bạn chưa c\xf3 th\xf4ng b\xe1o n\xe0o."})}):r.jsx("div",{className:"space-y-4",children:e.map(e=>r.jsx("div",{className:`bg-white rounded-lg shadow-sm p-6 ${e.is_read?"":"border-l-4 border-blue-600"}`,children:(0,r.jsxs)("div",{className:"flex items-start justify-between",children:[(0,r.jsxs)("div",{children:[r.jsx("h2",{className:"text-lg font-semibold text-gray-900 mb-2",children:e.title}),r.jsx("p",{className:"text-gray-600",children:e.content}),r.jsx("p",{className:"text-sm text-gray-500 mt-2",children:new Date(e.created_at).toLocaleString("vi-VN")})]}),!e.is_read&&r.jsx("button",{onClick:()=>l(e.id),className:"text-blue-600 hover:text-blue-800",children:r.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-5 w-5",viewBox:"0 0 20 20",fill:"currentColor",children:r.jsx("path",{fillRule:"evenodd",d:"M16.707 5.293a1 1 0 010 1.414l-8 8a1 1 0 01-1.414 0l-4-4a1 1 0 011.414-1.414L8 12.586l7.293-7.293a1 1 0 011.414 0z",clipRule:"evenodd"})})})]})},e.id))})]})})]})}},2148:(e,t,s)=>{"use strict";s.r(t),s.d(t,{$$typeof:()=>a,__esModule:()=>i,default:()=>n});let r=(0,s(6843).createProxy)(String.raw`C:\Users\dngvieth_23\OneDrive\Desktop\local-shop\src\app\notifications\page.tsx`),{__esModule:i,$$typeof:a}=r,n=r.default}};var t=require("../../webpack-runtime.js");t.C(e);var s=e=>t(t.s=e),r=t.X(0,[1638,9572,5321],()=>s(4246));module.exports=r})();