"use strict";(()=>{var e={};e.id=5941,e.ids=[5941],e.modules={517:e=>{e.exports=require("next/dist/compiled/next-server/app-route.runtime.prod.js")},6113:e=>{e.exports=require("crypto")},3148:(e,t,n)=>{n.r(t),n.d(t,{headerHooks:()=>g,originalPathname:()=>f,patchFetch:()=>O,requestAsyncStorage:()=>y,routeModule:()=>m,serverHooks:()=>_,staticGenerationAsyncStorage:()=>h,staticGenerationBailout:()=>P});var r={};n.r(r),n.d(r,{POST:()=>d});var a=n(5419),o=n(9108),p=n(9678),s=n(8070),i=n(6113),c=n.n(i);let u=process.env.VNP_TMN_CODE||"",l=process.env.VNP_HASH_SECRET||"",v=process.env.VNP_URL||"https://sandbox.vnpayment.vn/paymentv2/vpcpay.html";async function d(e){try{let{amount:t,orderInfo:n}=await e.json(),r=new Date().toISOString().replace(/[-:]/g,"").split(".")[0]+"Z",a=`ORDER_${Date.now()}`,o={vnp_Version:"2.1.0",vnp_Command:"pay",vnp_TmnCode:u,vnp_Locale:"vn",vnp_CurrCode:"VND",vnp_TxnRef:a,vnp_OrderInfo:n,vnp_OrderType:"billpayment",vnp_Amount:Math.round(100*t),vnp_ReturnUrl:"https://devthai23.info.vn/payment-result",vnp_CreateDate:r},p=Object.keys(o).sort().reduce((e,t)=>{let n=o[t];return void 0!==n&&(e[t]=n),e},{}),i=Object.entries(p).map(([e,t])=>`${e}=${t}`).join("&"),d=c().createHmac("sha512",l).update(Buffer.from(i,"utf-8")).digest("hex");o.vnp_SecureHash=d;let m=`${v}?${Object.entries(o).map(([e,t])=>`${e}=${encodeURIComponent(t?.toString()||"")}`).join("&")}`;return console.log("VNPay Params:",o),console.log("Sign Data:",i),console.log("Signature:",d),console.log("Payment URL:",m),s.Z.json({paymentUrl:m})}catch(e){return console.error("Error creating payment:",e),s.Z.json({error:"Failed to create payment"},{status:500})}}let m=new a.AppRouteRouteModule({definition:{kind:o.x.APP_ROUTE,page:"/api/create-payment/route",pathname:"/api/create-payment",filename:"route",bundlePath:"app/api/create-payment/route"},resolvedPagePath:"C:\\Users\\dngvieth_23\\OneDrive\\Desktop\\local-shop\\src\\app\\api\\create-payment\\route.ts",nextConfigOutput:"",userland:r}),{requestAsyncStorage:y,staticGenerationAsyncStorage:h,serverHooks:_,headerHooks:g,staticGenerationBailout:P}=m,f="/api/create-payment/route";function O(){return(0,p.patchFetch)({serverHooks:_,staticGenerationAsyncStorage:h})}}};var t=require("../../../webpack-runtime.js");t.C(e);var n=e=>t(t.s=e),r=t.X(0,[1638,6206],()=>n(3148));module.exports=r})();