(()=>{var e={};e.id=6938,e.ids=[6938],e.modules={7849:e=>{"use strict";e.exports=require("next/dist/client/components/action-async-storage.external")},2934:e=>{"use strict";e.exports=require("next/dist/client/components/action-async-storage.external.js")},5403:e=>{"use strict";e.exports=require("next/dist/client/components/request-async-storage.external")},4580:e=>{"use strict";e.exports=require("next/dist/client/components/request-async-storage.external.js")},4749:e=>{"use strict";e.exports=require("next/dist/client/components/static-generation-async-storage.external")},5869:e=>{"use strict";e.exports=require("next/dist/client/components/static-generation-async-storage.external.js")},399:e=>{"use strict";e.exports=require("next/dist/compiled/next-server/app-page.runtime.prod.js")},4300:e=>{"use strict";e.exports=require("buffer")},6113:e=>{"use strict";e.exports=require("crypto")},2361:e=>{"use strict";e.exports=require("events")},3685:e=>{"use strict";e.exports=require("http")},5687:e=>{"use strict";e.exports=require("https")},1808:e=>{"use strict";e.exports=require("net")},5477:e=>{"use strict";e.exports=require("punycode")},2781:e=>{"use strict";e.exports=require("stream")},4404:e=>{"use strict";e.exports=require("tls")},7310:e=>{"use strict";e.exports=require("url")},9796:e=>{"use strict";e.exports=require("zlib")},9716:(e,t,s)=>{"use strict";s.r(t),s.d(t,{GlobalError:()=>i.a,__next_app__:()=>u,originalPathname:()=>h,pages:()=>d,routeModule:()=>x,tree:()=>o});var r=s(482),a=s(9108),n=s(2563),i=s.n(n),l=s(8300),c={};for(let e in l)0>["default","tree","pages","GlobalError","originalPathname","__next_app__","routeModule"].indexOf(e)&&(c[e]=()=>l[e]);s.d(t,c);let o=["",{children:["settings",{children:["__PAGE__",{},{page:[()=>Promise.resolve().then(s.bind(s,9700)),"C:\\Users\\dngvieth_23\\OneDrive\\Desktop\\local-shop\\src\\app\\settings\\page.tsx"]}]},{}]},{layout:[()=>Promise.resolve().then(s.bind(s,4563)),"C:\\Users\\dngvieth_23\\OneDrive\\Desktop\\local-shop\\src\\app\\layout.tsx"],"not-found":[()=>Promise.resolve().then(s.t.bind(s,9361,23)),"next/dist/client/components/not-found-error"]}],d=["C:\\Users\\dngvieth_23\\OneDrive\\Desktop\\local-shop\\src\\app\\settings\\page.tsx"],h="/settings/page",u={require:s,loadChunk:()=>Promise.resolve()},x=new r.AppPageRouteModule({definition:{kind:a.x.APP_PAGE,page:"/settings/page",pathname:"/settings",bundlePath:"",filename:"",appPaths:[]},userland:{loaderTree:o}})},3854:(e,t,s)=>{Promise.resolve().then(s.bind(s,3961))},5674:(e,t,s)=>{"use strict";s.d(t,{Z:()=>r});let r=(0,s(7075).Z)("CreditCard",[["rect",{width:"20",height:"14",x:"2",y:"5",rx:"2",key:"ynyp8z"}],["line",{x1:"2",x2:"22",y1:"10",y2:"10",key:"1b3vmo"}]])},1354:(e,t,s)=>{"use strict";s.d(t,{Z:()=>r});let r=(0,s(7075).Z)("Heart",[["path",{d:"M19 14c1.49-1.46 3-3.21 3-5.5A5.5 5.5 0 0 0 16.5 3c-1.76 0-3 .5-4.5 2-1.5-1.5-2.74-2-4.5-2A5.5 5.5 0 0 0 2 8.5c0 2.3 1.5 4.05 3 5.5l7 7Z",key:"c3ymky"}]])},3485:(e,t,s)=>{"use strict";s.d(t,{Z:()=>r});let r=(0,s(7075).Z)("Shield",[["path",{d:"M20 13c0 5-3.5 7.5-7.66 8.95a1 1 0 0 1-.67-.01C7.5 20.5 4 18 4 13V6a1 1 0 0 1 1-1c2 0 4.5-1.2 6.24-2.72a1.17 1.17 0 0 1 1.52 0C14.51 3.81 17 5 19 5a1 1 0 0 1 1 1z",key:"oel41y"}]])},3714:(e,t,s)=>{"use strict";s.d(t,{Z:()=>r});let r=(0,s(7075).Z)("ShoppingBag",[["path",{d:"M6 2 3 6v14a2 2 0 0 0 2 2h14a2 2 0 0 0 2-2V6l-3-4Z",key:"hou9p0"}],["path",{d:"M3 6h18",key:"d0wm0j"}],["path",{d:"M16 10a4 4 0 0 1-8 0",key:"1ltviw"}]])},3961:(e,t,s)=>{"use strict";s.r(t),s.d(t,{default:()=>u});var r=s(5344),a=s(3729),n=s(8428),i=s(8704),l=s(7958);let c=(0,s(7075).Z)("Bell",[["path",{d:"M10.268 21a2 2 0 0 0 3.464 0",key:"vwvbt9"}],["path",{d:"M3.262 15.326A1 1 0 0 0 4 17h16a1 1 0 0 0 .74-1.673C19.41 13.956 18 12.499 18 8A6 6 0 0 0 6 8c0 4.499-1.411 5.956-2.738 7.326",key:"11g9vi"}]]);var o=s(3485),d=s(8120),h=s(9413);function u(){let e=(0,n.useRouter)(),[t,s]=(0,a.useState)(!0),[u,x]=(0,a.useState)(null),[p,g]=(0,a.useState)({orderUpdates:!0,promotions:!0,security:!0}),[m,f]=(0,a.useState)(!1),[y,b]=(0,a.useState)(null);(0,a.useEffect)(()=>{j(),v()},[]);let j=async()=>{let{data:{session:t}}=await i.O.auth.getSession();if(!t){e.push("/login");return}x(t.user)},v=async()=>{try{let{data:{session:e}}=await i.O.auth.getSession();if(!e)return;let{data:t,error:s}=await i.O.from("user_settings").select("*").eq("user_id",e.user.id).single();if(s&&"PGRST116"!==s.code)throw s;t&&g({orderUpdates:t.order_updates,promotions:t.promotions,security:t.security_alerts})}catch(e){console.error("Error fetching settings:",e)}finally{s(!1)}},w=async()=>{await i.O.auth.signOut(),e.push("/")},N=async e=>{e.preventDefault(),f(!0),b(null);let t=new FormData(e.currentTarget);t.get("currentPassword");let s=t.get("newPassword");if(s!==t.get("confirmPassword")){b({type:"error",text:"Mật khẩu mới kh\xf4ng khớp"}),f(!1);return}try{let{error:t}=await i.O.auth.updateUser({password:s});if(t)throw t;b({type:"success",text:"Cập nhật mật khẩu th\xe0nh c\xf4ng"}),e.target.reset()}catch(e){b({type:"error",text:e.message})}finally{f(!1)}},k=async e=>{try{let t=!p[e],{data:{session:s}}=await i.O.auth.getSession();if(!s)return;let{error:r}=await i.O.from("user_settings").upsert({user_id:s.user.id,["orderUpdates"===e?"order_updates":"promotions"===e?"promotions":"security_alerts"]:t,updated_at:new Date().toISOString()});if(r)throw r;g(s=>({...s,[e]:t})),b({type:"success",text:"Cập nhật c\xe0i đặt th\xe0nh c\xf4ng"})}catch(e){console.error("Error updating notification settings:",e),b({type:"error",text:"C\xf3 lỗi xảy ra khi cập nhật c\xe0i đặt"})}};return t?r.jsx("main",{className:"container mx-auto px-4 py-8",children:(0,r.jsxs)("div",{className:"animate-pulse",children:[r.jsx("div",{className:"h-8 bg-gray-200 rounded w-1/4 mb-8"}),(0,r.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-8",children:[(0,r.jsxs)("div",{className:"bg-white rounded-lg shadow-sm p-6",children:[r.jsx("div",{className:"h-4 bg-gray-200 rounded w-3/4 mb-4"}),r.jsx("div",{className:"h-4 bg-gray-200 rounded w-1/2"})]}),(0,r.jsxs)("div",{className:"md:col-span-3 bg-white rounded-lg shadow-sm p-6",children:[r.jsx("div",{className:"h-4 bg-gray-200 rounded w-1/4 mb-4"}),r.jsx("div",{className:"h-4 bg-gray-200 rounded w-3/4"})]})]})]})}):(0,r.jsxs)("main",{className:"container mx-auto px-4 py-8",children:[(0,r.jsxs)("div",{className:"flex items-center space-x-2 text-sm text-gray-600 mb-8",children:[r.jsx("a",{href:"/",className:"hover:text-red-600",children:"Trang chủ"}),r.jsx("span",{children:"/"}),r.jsx("a",{href:"/account",className:"hover:text-red-600",children:"T\xe0i khoản"}),r.jsx("span",{children:"/"}),r.jsx("span",{className:"text-gray-400",children:"C\xe0i đặt"})]}),r.jsx("h1",{className:"text-3xl font-bold text-gray-900 mb-8",children:"C\xe0i đặt t\xe0i khoản"}),(0,r.jsxs)("div",{className:"flex flex-col md:flex-row gap-8",children:[r.jsx(h.Z,{activePage:"settings"}),(0,r.jsxs)("div",{className:"flex-1 min-w-0 space-y-6",children:[y&&r.jsx("div",{className:`p-4 rounded-lg ${"success"===y.type?"bg-green-100 text-green-800":"bg-red-100 text-red-800"}`,children:y.text}),(0,r.jsxs)("div",{className:"bg-white rounded-lg shadow-sm p-6",children:[(0,r.jsxs)("div",{className:"flex items-center space-x-2 mb-6",children:[r.jsx(l.Z,{className:"w-5 h-5 text-gray-500"}),r.jsx("h2",{className:"text-xl font-semibold text-gray-900",children:"Đổi mật khẩu"})]}),(0,r.jsxs)("form",{onSubmit:N,className:"space-y-4",children:[(0,r.jsxs)("div",{children:[r.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Mật khẩu hiện tại"}),r.jsx("input",{type:"password",name:"currentPassword",required:!0,className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-red-600 focus:border-transparent"})]}),(0,r.jsxs)("div",{children:[r.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Mật khẩu mới"}),r.jsx("input",{type:"password",name:"newPassword",required:!0,className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-red-600 focus:border-transparent"})]}),(0,r.jsxs)("div",{children:[r.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"X\xe1c nhận mật khẩu mới"}),r.jsx("input",{type:"password",name:"confirmPassword",required:!0,className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-red-600 focus:border-transparent"})]}),r.jsx("button",{type:"submit",disabled:m,className:"px-6 py-2 bg-red-600 text-white rounded-lg hover:bg-red-700 transition-colors disabled:opacity-50 disabled:cursor-not-allowed",children:m?"Đang cập nhật...":"Cập nhật mật khẩu"})]})]}),(0,r.jsxs)("div",{className:"bg-white rounded-lg shadow-sm p-6",children:[(0,r.jsxs)("div",{className:"flex items-center space-x-2 mb-6",children:[r.jsx(c,{className:"w-5 h-5 text-gray-500"}),r.jsx("h2",{className:"text-xl font-semibold text-gray-900",children:"C\xe0i đặt th\xf4ng b\xe1o"})]}),(0,r.jsxs)("div",{className:"space-y-4",children:[(0,r.jsxs)("div",{className:"flex items-center justify-between",children:[(0,r.jsxs)("div",{children:[r.jsx("h3",{className:"font-medium text-gray-900",children:"Cập nhật đơn h\xe0ng"}),r.jsx("p",{className:"text-sm text-gray-500",children:"Nhận th\xf4ng b\xe1o về trạng th\xe1i đơn h\xe0ng"})]}),(0,r.jsxs)("label",{className:"relative inline-flex items-center cursor-pointer",children:[r.jsx("input",{type:"checkbox",checked:p.orderUpdates,onChange:()=>k("orderUpdates"),className:"sr-only peer"}),r.jsx("div",{className:"w-11 h-6 bg-gray-200 peer-focus:outline-none peer-focus:ring-4 peer-focus:ring-red-300 rounded-full peer peer-checked:after:translate-x-full peer-checked:after:border-white after:content-[''] after:absolute after:top-[2px] after:left-[2px] after:bg-white after:border-gray-300 after:border after:rounded-full after:h-5 after:w-5 after:transition-all peer-checked:bg-red-600"})]})]}),(0,r.jsxs)("div",{className:"flex items-center justify-between",children:[(0,r.jsxs)("div",{children:[r.jsx("h3",{className:"font-medium text-gray-900",children:"Khuyến m\xe3i"}),r.jsx("p",{className:"text-sm text-gray-500",children:"Nhận th\xf4ng tin về khuyến m\xe3i v\xe0 ưu đ\xe3i"})]}),(0,r.jsxs)("label",{className:"relative inline-flex items-center cursor-pointer",children:[r.jsx("input",{type:"checkbox",checked:p.promotions,onChange:()=>k("promotions"),className:"sr-only peer"}),r.jsx("div",{className:"w-11 h-6 bg-gray-200 peer-focus:outline-none peer-focus:ring-4 peer-focus:ring-red-300 rounded-full peer peer-checked:after:translate-x-full peer-checked:after:border-white after:content-[''] after:absolute after:top-[2px] after:left-[2px] after:bg-white after:border-gray-300 after:border after:rounded-full after:h-5 after:w-5 after:transition-all peer-checked:bg-red-600"})]})]}),(0,r.jsxs)("div",{className:"flex items-center justify-between",children:[(0,r.jsxs)("div",{children:[r.jsx("h3",{className:"font-medium text-gray-900",children:"Bảo mật"}),r.jsx("p",{className:"text-sm text-gray-500",children:"Nhận th\xf4ng b\xe1o về hoạt động đ\xe1ng ngờ"})]}),(0,r.jsxs)("label",{className:"relative inline-flex items-center cursor-pointer",children:[r.jsx("input",{type:"checkbox",checked:p.security,onChange:()=>k("security"),className:"sr-only peer"}),r.jsx("div",{className:"w-11 h-6 bg-gray-200 peer-focus:outline-none peer-focus:ring-4 peer-focus:ring-red-300 rounded-full peer peer-checked:after:translate-x-full peer-checked:after:border-white after:content-[''] after:absolute after:top-[2px] after:left-[2px] after:bg-white after:border-gray-300 after:border after:rounded-full after:h-5 after:w-5 after:transition-all peer-checked:bg-red-600"})]})]})]})]}),(0,r.jsxs)("div",{className:"bg-white rounded-lg shadow-sm p-6",children:[(0,r.jsxs)("div",{className:"flex items-center space-x-2 mb-6",children:[r.jsx(o.Z,{className:"w-5 h-5 text-gray-500"}),r.jsx("h2",{className:"text-xl font-semibold text-gray-900",children:"Bảo mật t\xe0i khoản"})]}),r.jsx("div",{className:"space-y-4",children:(0,r.jsxs)("button",{onClick:w,className:"flex items-center space-x-2 text-red-600 hover:text-red-700",children:[r.jsx(d.Z,{className:"w-5 h-5"}),r.jsx("span",{children:"Đăng xuất khỏi tất cả thiết bị"})]})})]})]})]})]})}},9413:(e,t,s)=>{"use strict";s.d(t,{Z:()=>d});var r=s(5344),a=s(6506),n=s(5777),i=s(3714),l=s(5674),c=s(1354),o=s(3746);function d({activePage:e}){return(0,r.jsxs)("div",{className:"w-full md:w-64 space-y-1",children:[(0,r.jsxs)(a.default,{href:"/account",className:`flex items-center space-x-2 p-3 rounded-lg hover:bg-gray-50 ${"profile"===e?"bg-gray-50 text-red-600":"text-gray-700"}`,children:[r.jsx(n.Z,{className:"w-5 h-5"}),r.jsx("span",{children:"Th\xf4ng tin t\xe0i khoản"})]}),(0,r.jsxs)(a.default,{href:"/orders",className:`flex items-center space-x-2 p-3 rounded-lg hover:bg-gray-50 ${"orders"===e?"bg-gray-50 text-red-600":"text-gray-700"}`,children:[r.jsx(i.Z,{className:"w-5 h-5"}),r.jsx("span",{children:"Đơn h\xe0ng của t\xf4i"})]}),(0,r.jsxs)(a.default,{href:"/payment",className:`flex items-center space-x-2 p-3 rounded-lg hover:bg-gray-50 ${"payment"===e?"bg-gray-50 text-red-600":"text-gray-700"}`,children:[r.jsx(l.Z,{className:"w-5 h-5"}),r.jsx("span",{children:"Phương thức thanh to\xe1n"})]}),(0,r.jsxs)(a.default,{href:"/favorites",className:`flex items-center space-x-2 p-3 rounded-lg hover:bg-gray-50 ${"favorites"===e?"bg-gray-50 text-red-600":"text-gray-700"}`,children:[r.jsx(c.Z,{className:"w-5 h-5"}),r.jsx("span",{children:"Sản phẩm y\xeau th\xedch"})]}),(0,r.jsxs)(a.default,{href:"/settings",className:`flex items-center space-x-2 p-3 rounded-lg hover:bg-gray-50 ${"settings"===e?"bg-gray-50 text-red-600":"text-gray-700"}`,children:[r.jsx(o.Z,{className:"w-5 h-5"}),r.jsx("span",{children:"C\xe0i đặt"})]})]})}},9700:(e,t,s)=>{"use strict";s.r(t),s.d(t,{$$typeof:()=>n,__esModule:()=>a,default:()=>i});let r=(0,s(6843).createProxy)(String.raw`C:\Users\dngvieth_23\OneDrive\Desktop\local-shop\src\app\settings\page.tsx`),{__esModule:a,$$typeof:n}=r,i=r.default}};var t=require("../../webpack-runtime.js");t.C(e);var s=e=>t(t.s=e),r=t.X(0,[1638,9572,9370],()=>s(9716));module.exports=r})();